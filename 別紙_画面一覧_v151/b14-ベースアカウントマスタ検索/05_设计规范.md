# b14-ãƒ™ãƒ¼ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒã‚¹ã‚¿æ¤œç´¢ - è®¾è®¡è§„èŒƒ

## 1. åŠŸèƒ½æ¦‚è¿°

### 1.1 æ–‡æ¡£ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| **å·¥ä½œè¡¨åç§°** | b14-ãƒ™ãƒ¼ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒã‚¹ã‚¿æ¤œç´¢ |
| **ç•Œé¢ç¼–å·** | b14 |
| **å¯¹åº”Baseç•Œé¢** | b11-è¼¸é€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒã‚¹ã‚¿ä¸€è¦§ |
| **æ–‡æ¡£ç‰ˆæœ¬** | v1.0.1 |
| **æœ€åæ›´æ–°** | 2026-02-10|
| **æ–‡æ¡£çŠ¶æ€** | âœ… å·²å‘å¸ƒ |

### 1.2 åŠŸèƒ½æè¿°

b14-ãƒ™ãƒ¼ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒã‚¹ã‚¿æ¤œç´¢æ˜¯ãƒ™ãƒ¼ã‚¹ï¼ˆæ€»éƒ¨ï¼‰ä¾§çš„åŸºç¡€è´¦æˆ·æœç´¢é¡µé¢ã€‚ç®¡ç†è€…å¯ä»¥é€šè¿‡æ­¤é¡µé¢ï¼š

- æ ¹æ®å¤šæ¡ä»¶æœç´¢åŸºç¡€è´¦æˆ·ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼IDã€ãƒ¡ãƒ¼ãƒ«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€æ‰€å±ã€æ¨©é™ï¼‰
- ä»AzureADåŒæ­¥ç”¨æˆ·ä¿¡æ¯
- æŸ¥çœ‹æœç´¢ç»“æœåˆ—è¡¨
- æŸ¥çœ‹è´¦æˆ·è¯¦ç»†ä¿¡æ¯ï¼ˆè·³è½¬åˆ°b15ï¼‰
- æ–°è¦è¿½åŠ åŸºç¡€è´¦æˆ·

### 1.3 æŠ€æœ¯æ¶æ„

æœ¬æ–‡æ¡£åŸºäº **å‰åç«¯åˆ†ç¦»æ¶æ„**ï¼Œè¯¦ç»†æŠ€æœ¯è§„èŒƒè¯·å‚è€ƒï¼š

ğŸ‘‰ **[\_å…¬å…±æŠ€æœ¯æ¶æ„è§„èŒƒ.md](../_å…¬å…±æŠ€æœ¯æ¶æ„è§„èŒƒ.md)**

| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| å‰ç«¯ | React 18.x + TypeScript + Ant Design |
| åç«¯ | Spring Boot 3.x + Java 17 |
| æ•°æ®åº“ | PostgreSQL 15.x |

### 1.4 æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ |
|------|------|--------|
| å¤šæ¡ä»¶æœç´¢ | æ”¯æŒ5ä¸ªå­—æ®µçš„ç»„åˆæœç´¢ | P0 |
| AzureADé€£æº | ä»AzureADè·å–ç”¨æˆ·ä¿¡æ¯ | P0 |
| æ¤œç´¢çµæœè¡¨ç¤º | è¡¨æ ¼å±•ç¤ºæœç´¢ç»“æœ | P0 |
| è©³ç´°è¡¨ç¤º | è·³è½¬åˆ°è´¦æˆ·è¯¦æƒ…é¡µé¢ | P0 |
| æ–°è¦è¿½åŠ  | æ–°å¢åŸºç¡€è´¦æˆ· | P0 |
| ä¸¦ã³æ›¿ãˆ | å„åˆ—æ’åºæ”¯æŒ | P0 |
| ãƒšãƒ¼ã‚¸ãƒ³ã‚° | åˆ†é¡µå±•ç¤ºç»“æœ | P0 |

### 1.5 é€‚ç”¨èŒƒå›´

- å‰ç«¯å¼€å‘äººå‘˜ï¼ˆæœç´¢é¡µé¢ç»„ä»¶å®ç°ï¼‰
- åç«¯å¼€å‘äººå‘˜ï¼ˆè´¦æˆ·APIå¼€å‘ï¼‰
- æµ‹è¯•å·¥ç¨‹å¸ˆï¼ˆåŠŸèƒ½æµ‹è¯•ï¼‰

---

## 2. é¡µé¢å…ƒç´ 

### 2.1 å…ƒç´ æ¸…å•

| åºå· | å…ƒç´ åç§° | å…ƒç´ ç±»å‹ | åŠŸèƒ½è¯´æ˜ | äº¤äº’è§¦å‘ |
|------|----------|----------|----------|----------|
| â‘´ | æ¤œç´¢æ¡ä»¶ã‚¨ãƒªã‚¢ | Form | æ¤œç´¢æ¡ä»¶å…¥åŠ›ã‚¨ãƒªã‚¢ | ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ› |
| â‘µ | ãƒ¦ãƒ¼ã‚¶ãƒ¼IDå…¥åŠ› | Input | AzureADãƒ¦ãƒ¼ã‚¶ãƒ¼ID | æ–‡å­—å…¥åŠ› |
| â‘¶ | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ› | Input | AzureADãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ | æ–‡å­—å…¥åŠ› |
| â‘· | ãƒ¦ãƒ¼ã‚¶ãƒ¼åå…¥åŠ› | Input | AzureADãƒ¦ãƒ¼ã‚¶ãƒ¼å | æ–‡å­—å…¥åŠ› |
| â‘¸ | æ‰€å±å…¥åŠ› | Input | æ‰€å±ãƒ™ãƒ¼ã‚¹å | æ–‡å­—å…¥åŠ› |
| â‘¹ | æ¨©é™é¸æŠ | Radio | æ¨©é™åŒºåˆ†é¸æŠ | ãƒ©ã‚¸ã‚ªé¸æŠ |
| â‘º | æ¤œç´¢ãƒœã‚¿ãƒ³ | Primary Button | æ¤œç´¢å®Ÿè¡Œ | ã‚¯ãƒªãƒƒã‚¯ |
| â‘» | ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ | Default Button | æ¡ä»¶ãƒªã‚»ãƒƒãƒˆ | ã‚¯ãƒªãƒƒã‚¯ |
| â‘¼ | æ¤œç´¢çµæœã‚¨ãƒªã‚¢ | Card | æ¤œç´¢çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ | è¡¨ç¤º |
| â‘½ | ï¼‹æ–°è¦è¿½åŠ  | Button | æ–°è¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¿½åŠ  | ã‚¯ãƒªãƒƒã‚¯ |
| â‘¾ | çµæœãƒ†ãƒ¼ãƒ–ãƒ« | Table | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¸€è¦§ | è¡Œã‚¯ãƒªãƒƒã‚¯/ã‚½ãƒ¼ãƒˆ |
| â‘¿ | ãƒ¦ãƒ¼ã‚¶ãƒ¼IDåˆ— | Link Column | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID | ã‚¯ãƒªãƒƒã‚¯â†’è©³ç´° |
| â’€ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ååˆ— | Column | AzureADç”¨æˆ·å | è¡¨ç¤º/ã‚½ãƒ¼ãƒˆ |
| â’ | æ‰€å±åˆ— | Column | æ‰€å±ãƒ™ãƒ¼ã‚¹å | è¡¨ç¤º/ã‚½ãƒ¼ãƒˆ |
| â’‚ | æ¨©é™åˆ— | Tag Column | æ¨©é™åŒºåˆ† | Tagè¡¨ç¤º |
| â’ƒ | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆçŠ¶æ…‹åˆ— | Tag Column | æœ‰åŠ¹/ç„¡åŠ¹ | Tagè¡¨ç¤º |
| â’„ | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹åˆ— | Column | ãƒ¡ãƒ¼ãƒ«ãƒ‰ãƒ¬ã‚¹ | è¡¨ç¤º/ã‚½ãƒ¼ãƒˆ |
| â’… | ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ | Pagination | ãƒšãƒ¼ã‚¸ãƒ³ã‚°æ“ä½œ | ã‚¯ãƒªãƒƒã‚¯ |
| â’† | åˆè¨ˆè¡¨ç¤º | Statistic | æ¤œç´¢çµæœåˆè¨ˆ | è¡¨ç¤º |

### 2.2 æ¤œç´¢æ¡ä»¶è©³ç´°èª¬æ˜

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | è¦ç´ ã‚¿ã‚¤ãƒ— | åˆ¶ç´„ | ãƒ‡ãƒ¼ã‚¿å½¢å¼ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|-----------|-----------|------|-----------|----------|
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ID | Input | åŠè§’è‹±æ•°50æ–‡å­— | éƒ¨åˆ†ä¸€è‡´ | ç©º |
| ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ | Input | emailå½¢å¼200æ–‡å­— | éƒ¨åˆ†ä¸€è‡´ | ç©º |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼å | Input | æ–‡å­—åˆ—200æ–‡å­— | éƒ¨åˆ†ä¸€è‡´ | ç©º |
| æ‰€å± | Input | æ–‡å­—åˆ—200æ–‡å­— | éƒ¨åˆ†ä¸€è‡´ | ç©º |
| æ¨©é™ | Radio | åˆ—æŒ™å€¤ | å®Œå…¨ä¸€è‡´ | ç©º |

### 2.3 æ¤œç´¢çµæœãƒ†ãƒ¼ãƒ–ãƒ«è©³ç´°èª¬æ˜

| ã‚«ãƒ©ãƒ å | è¦ç´ ã‚¿ã‚¤ãƒ— | æ›¸å¼ | ã‚½ãƒ¼ãƒˆ | èª¬æ˜ |
|----------|-----------|------|--------|------|
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ID | Link | æ–‡å­—åˆ— | â—‹ | è©³ç´°ãƒšãƒ¼ã‚¸ã¸ |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼å | Text | æ–‡å­—åˆ— | â—‹ | AzureADç”¨æˆ·å |
| æ‰€å± | Text | æ–‡å­—åˆ— | â—‹ | æ‰€å±ãƒ™ãƒ¼ã‚¹å |
| æ¨©é™ | Tag | è‰²ä»˜ã | â—‹ | æ¨©é™åŒºåˆ† |
| ã‚¢ã‚«ã‚¦ãƒ³ãƒˆçŠ¶æ…‹ | Tag | è‰²ä»˜ã | â—‹ | çŠ¶æ…‹è¡¨ç¤º |
| ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ | Text | emailå½¢å¼ | â—‹ | ãƒ¡ãƒ¼ãƒ«ãƒ‰ãƒ¬ã‚¹ |

### 2.4 æ¨©é™å€¤è©³ç´°

| æ¨©é™å€¤ | è¡¨ç¤ºå | ã‚¿ã‚°è‰² | èª¬æ˜ |
|--------|--------|--------|------|
| ç®¡ç†è€… | ç®¡ç†è€… | èµ¤è‰² | ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€… |
| å½¹å‰²è€… | å½¹å‰²è€… | é’è‰² | ä¸€èˆ¬å½¹å‰²è€… |
| é…è»Šæ‹…å½“è€… | é…è»Šæ‹…å½“è€… | ç·‘è‰² | é…è»Šæ¥­å‹™æ‹…å½“è€… |
| è¨ˆä¸Šæ‹…å½“è€… | è¨ˆä¸Šæ‹…å½“è€… | æ©™è‰² | è¨ˆä¸Šæ¥­å‹™æ‹…å½“è€… |

### 2.5 ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å€¤è©³ç´°

| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å€¤ | è¡¨ç¤ºå | ã‚¿ã‚°è‰² | èª¬æ˜ |
|--------------|--------|--------|------|
| æœ‰åŠ¹ | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæœ‰åŠ¹ | ç·‘è‰² | è´¦æˆ·æ­£å¸¸ä½¿ç”¨ä¸­ |
| ç„¡åŠ¹ | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç„¡åŠ¹ | èµ¤è‰² | è´¦æˆ·å·²ç¦ç”¨ |

---

## 3. äº¤äº’æµç¨‹

### 3.1 ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰ãƒ•ãƒ­ãƒ¼

| ã‚¹ãƒ†ãƒƒãƒ— | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | ã‚·ã‚¹ãƒ†ãƒ å¿œç­” |
|----------|-----------|--------------|
| 1 | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒb14ãƒšãƒ¼ã‚¸ã¸é·ç§» | ãƒšãƒ¼ã‚¸åˆæœŸåŒ– |
| 2 | ç©ºã®æ¤œç´¢æ¡ä»¶è¨­å®š | ã™ã¹ã¦ç©ºæ¬„ |
| 3 | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ¤œç´¢å®Ÿè¡Œ | å…¨ä»¶æ¤œç´¢ |
| 4 | æ¤œç´¢APIè‡ªå‹•å®Ÿè¡Œ | GET /api/v1/base-accounts/search |
| 5 | APIãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡ | ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿è¨­å®š |
| 6 | ãƒ†ãƒ¼ãƒ–ãƒ«æç”» | ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š |
| 7 | ãƒšãƒ¼ã‚¸è¡¨ç¤ºå®Œäº† | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œå¾…æ©Ÿ |

### 3.2 æ¤œç´¢æ“ä½œãƒ•ãƒ­ãƒ¼

| ã‚¹ãƒ†ãƒƒãƒ— | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ | ã‚·ã‚¹ãƒ†ãƒ å¿œç­” |
|----------|-------------|--------------|
| 1 | æ¤œç´¢æ¡ä»¶å…¥åŠ›/é¸æŠ | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
| 2 | æ¤œç´¢ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ | ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºé–‹å§‹ |
| 3 | æ¤œç´¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ§‹ç¯‰ | å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å€¤å–å¾— |
| 4 | APIãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ | GET /api/v1/base-accounts/search |
| 5 | ãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡ | ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿æ›´æ–° |
| 6 | ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æ›´æ–° | åˆè¨ˆä»¶æ•°è¡¨ç¤ºæ›´æ–° |
| 7 | æ¤œç´¢å®Œäº† | ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºçµ‚äº† |

### 3.3 ãƒªã‚»ãƒƒãƒˆæ“ä½œãƒ•ãƒ­ãƒ¼

| ã‚¹ãƒ†ãƒƒãƒ— | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ | ã‚·ã‚¹ãƒ†ãƒ å¿œç­” |
|----------|-------------|--------------|
| 1 | ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ | ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º |
| 2 | ç¢ºèª | å…¨æ¤œç´¢æ¡ä»¶ã‚¯ãƒªã‚¢ |
| 3 | æ¤œç´¢APIå†å®Ÿè¡Œ | page=1ã§å…¨ä»¶æ¤œç´¢ |
| 4 | ãƒ†ãƒ¼ãƒ–ãƒ«æ›´æ–° | åˆæœŸçŠ¶æ…‹è¡¨ç¤º |

### 3.4 è©³ç´°è¡¨ç¤ºãƒ•ãƒ­ãƒ¼

| ã‚¹ãƒ†ãƒƒãƒ— | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ | ã‚·ã‚¹ãƒ†ãƒ å¿œç­” |
|----------|-------------|--------------|
| 1 | ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãƒªãƒ³ã‚¯ã‚¯ãƒªãƒƒã‚¯ | b15é¡µé¢ã¸é·ç§» |
| 2 | URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®š | /b15/{userId} |
| 3 | è©³ç´°ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰ | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±è¡¨ç¤º |

### 3.5 æ–°è¦è¿½åŠ ãƒ•ãƒ­ãƒ¼

| ã‚¹ãƒ†ãƒƒãƒ— | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ | ã‚·ã‚¹ãƒ†ãƒ å¿œç­” |
|----------|-------------|--------------|
| 1 | ï¼‹æ–°è¦è¿½åŠ ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ | AzureADæ¤œç´¢ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º |
| 2 | AzureADãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢ | AzureAD APIå®Ÿè¡Œ |
| 3 | ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠ | æƒ…å ±å–å¾—ãƒ»è¡¨ç¤º |
| 4 | æ¨©é™ãƒ»æ‰€å±è¨­å®š | å„é …ç›®å…¥åŠ› |
| 5 | ä¿å­˜ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ | æ–°è¦ç™»éŒ²APIå®Ÿè¡Œ |

### 3.6 ãƒšãƒ¼ã‚¸ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼

| ã‚¹ãƒ†ãƒƒãƒ— | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ | ã‚·ã‚¹ãƒ†ãƒ å¿œç­” |
|----------|-------------|--------------|
| 1 | ãƒšãƒ¼ã‚¸ç•ªå·ã‚¯ãƒªãƒƒã‚¯ | ãƒšãƒ¼ã‚¸ç•ªå·å–å¾— |
| 2 | æ¤œç´¢APIå†å®Ÿè¡Œ | pageãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ  |
| 3 | ãƒ†ãƒ¼ãƒ–ãƒ«æ›´æ–° | è©²å½“ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º |
| 4 | ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®èª¿æ•´ | ãƒ†ãƒ¼ãƒ–ãƒ«ä¸Šéƒ¨ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« |

### 3.7 ä¸¦ã³æ›¿ãˆãƒ•ãƒ­ãƒ¼

| ã‚¹ãƒ†ãƒƒãƒ— | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ | ã‚·ã‚¹ãƒ†ãƒ å¿œç­” |
|----------|-------------|--------------|
| 1 | åˆ—ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¯ãƒªãƒƒã‚¯ | ã‚½ãƒ¼ãƒˆé †åºåˆ‡æ›¿ |
| 2 | ã‚½ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ  | sort, sortOrder |
| 3 | æ¤œç´¢APIå†å®Ÿè¡Œ | ä¸¦ã³æ›¿ãˆé©ç”¨ |
| 4 | ãƒ†ãƒ¼ãƒ–ãƒ«æ›´æ–° | ä¸¦ã³æ›¿ãˆå¾Œãƒ‡ãƒ¼ã‚¿è¡¨ç¤º |

---

## 4. ç•Œé¢è§„èŒƒ

### 4.1 ãƒšãƒ¼ã‚¸ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

| å±æ€§ | PCç«¯å€¤ | SPç«¯å€¤ | èª¬æ˜ |
|------|--------|--------|------|
| **ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—** | PCã®ã¿ | - | PCä¸“ç”¨é¡µé¢ |
| **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ–¹å¼** | ä¸Šâ†’ä¸‹é…ç½® | å‚ç›´é…ç½® | æ¤œç´¢â†’ãƒ†ãƒ¼ãƒ–ãƒ«â†’ãƒšãƒ¼ã‚¸ãƒ³ã‚° |
| **æ¤œç´¢ã‚¨ãƒªã‚¢** | æ°´å¹³é…ç½® | å‚ç›´é…ç½® | PC:5åˆ—, SP:ç¸¦1åˆ— |

### 4.2 æ¤œç´¢ã‚¨ãƒªã‚¢ä»•æ§˜

| å±æ€§ | å€¤ | èª¬æ˜ |
|------|----|------|
| **ãƒ©ãƒ™ãƒ«å¹…** | 100px | å›ºå®šå¹… |
| **å…¥åŠ›æ¬„å¹…** | 200px | PCç«¯å›ºå®šå¹… |
| **ãƒ©ã‚¸ã‚ªé–“éš”** | 16px | ã‚ªãƒ—ã‚·ãƒ§ãƒ³é–“ä½™ç™½ |
| **ãƒœã‚¿ãƒ³é–“éš”** | 8px | ãƒœã‚¿ãƒ³é–“ä½™ç™½ |
| **ãƒ•ã‚©ãƒ¼ãƒ ä½™ç™½** | 24px | æ¤œç´¢ã‚¨ãƒªã‚¢ä¸‹éƒ¨ä½™ç™½ |

### 4.3 ãƒ†ãƒ¼ãƒ–ãƒ«ä»•æ§˜

| å±æ€§ | å€¤ | èª¬æ˜ |
|------|----|------|
| **è¡Œé«˜** | 48px | å›ºå®šè¡Œé«˜ |
| **ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º** | 14px | æ¨™æº–ãƒ†ã‚­ã‚¹ãƒˆ |
| **ç¸æ¨¡æ§˜** | æœ‰ã‚Š | å¶æ•°è¡ŒèƒŒæ™¯#fafafa |
| **ãƒ›ãƒãƒ¼åŠ¹æœ** | æœ‰ã‚Š | è¡Œãƒ›ãƒãƒ¼èƒŒæ™¯#f5f5f5 |
| **ãƒœãƒ¼ãƒ€ãƒ¼** | 1px #e8e8e8 | ã‚»ãƒ«å¢ƒç•Œç·š |
| **ãƒ˜ãƒƒãƒ€ãƒ¼å›ºå®š** | æœ‰ã‚Š | ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ãƒ˜ãƒƒãƒ€ãƒ¼å›ºå®š |

### 4.4 ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¿ã‚°ä»•æ§˜

| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | èƒŒæ™¯è‰² | æ–‡å­—è‰² | èª¬æ˜ |
|-----------|--------|--------|------|
| æœ‰åŠ¹ | #52c41a | #ffffff | ç»¿è‰²æ ‡ç­¾ |
| ç„¡åŠ¹ | #f5222d | #ffffff | çº¢è‰²æ ‡ç­¾ |
| ç®¡ç†è€… | #f5222d | #ffffff | èµ¤è‰²æ ‡ç­¾ |
| å½¹å‰²è€… | #1890ff | #ffffff | è“è‰²æ ‡ç­¾ |
| é…è»Šæ‹…å½“è€… | #52c41a | #ffffff | ç»¿è‰²æ ‡ç­¾ |
| è¨ˆä¸Šæ‹…å½“è€… | #fa8c16 | #ffffff | æ©™è‰²æ ‡ç­¾ |

### 4.5 ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ä»•æ§˜

| å±æ€§ | å€¤ | èª¬æ˜ |
|------|----|------|
| **ãƒšãƒ¼ã‚¸ã‚µã‚¤ã‚º** | 10/20/50/100 | é¸æŠå¯èƒ½ |
| **è¡¨ç¤ºä½ç½®** | å³ä¸‹ | ãƒ†ãƒ¼ãƒ–ãƒ«ä¸‹ä¸­å¤® |
| **ç·ä»¶æ•°è¡¨ç¤º** | æœ‰ã‚Š | "1-20 / 100ä»¶" å½¢å¼ |

---

## 5. APIæ¥å£è®¾è®¡

### 5.1 ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ¤œç´¢API

```typescript
// GET /api/v1/base-accounts/search
interface SearchBaseAccountsRequest {
  userId?: string;
  email?: string;
  userName?: string;
  affiliation?: string;
  permission?: PermissionType;
  page?: number;
  pageSize?: number;
  sort?: string;
  sortOrder?: 'asc' | 'desc';
}

interface SearchBaseAccountsResponse {
  success: boolean;
  data: {
    accounts: BaseAccountInfo[];
    pagination: {
      currentPage: number;
      pageSize: number;
      totalItems: number;
      totalPages: number;
    };
    summary: {
      totalCount: number;
      adminCount: number;
      operatorCount: number;
    };
  };
  error?: {
    code: string;
    message: string;
    details?: Record<string, unknown>;
  };
}

type PermissionType = 'ç®¡ç†è€…' | 'å½¹å‰²è€…' | 'é…è»Šæ‹…å½“è€…' | 'è¨ˆä¸Šæ‹…å½“è€…';

interface BaseAccountInfo {
  userId: string;
  userName: string;
  affiliation: string;
  permission: PermissionType;
  accountStatus: 'æœ‰åŠ¹' | 'ç„¡åŠ¹';
  email: string;
  createdAt: string;
  lastLoginAt?: string;
}
```

### 5.2 ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè©³ç´°å–å¾—API

```typescript
// GET /api/v1/base-accounts/{userId}
interface GetBaseAccountDetailResponse {
  success: boolean;
  data: {
    userId: string;
    userName: string;
    email: string;
    affiliation: string;
    permission: PermissionType;
    accountStatus: 'æœ‰åŠ¹' | 'ç„¡åŠ¹';
    azureAdId: string;
    roles: string[];
    permissions: string[];
    createdAt: string;
    updatedAt: string;
    lastLoginAt?: string;
  };
}
```

### 5.3 AzureADãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢API

```typescript
// GET /api/v1/external/azure-ad/users/search
interface SearchAzureADUsersRequest {
  query?: string;
  department?: string;
  page?: number;
  pageSize?: number;
}

interface SearchAzureADUsersResponse {
  success: boolean;
  data: {
    users: AzureADUserInfo[];
    pagination: {
      currentPage: number;
      pageSize: number;
      totalItems: number;
    };
  };
}

interface AzureADUserInfo {
  userId: string;
  userName: string;
  email: string;
  department?: string;
  jobTitle?: string;
}
```

### 5.4 ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆAPI

```typescript
// POST /api/v1/base-accounts
interface CreateBaseAccountRequest {
  userId: string;
  userName: string;
  email: string;
  affiliation: string;
  permission: PermissionType;
  accountStatus: 'æœ‰åŠ¹' | 'ç„¡åŠ¹';
  roles?: string[];
}

interface CreateBaseAccountResponse {
  success: boolean;
  data: {
    userId: string;
    createdAt: string;
  };
  message: string;
}
```

### 5.6 ç”»é¢-API-æ•°æ®åº“å…³ç³»æ˜ å°„è¡¨

#### 5.6.1 å…³ç³»æ€»è§ˆè¡¨

| ç”»é¢å…ƒç´  | APIæ¥å£ | æ¥å£åŠŸèƒ½è¯´æ˜ | ç›¸å…³æ•°æ®åº“è¡¨ | å­—æ®µå…³ç³» |
|----------|---------|--------------|--------------|----------|
| ãƒ¦ãƒ¼ã‚¶ãƒ¼IDå…¥åŠ› | GET /api/v1/base-accounts/search | æœç´¢ç”¨æˆ·ID | m_base_accounts | user_id LIKE %userId% |
| ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ› | GET /api/v1/base-accounts/search | æœç´¢é‚®ç®± | m_base_accounts | email LIKE %email% |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼åå…¥åŠ› | GET /api/v1/base-accounts/search | æœç´¢ç”¨æˆ·å | m_base_accounts | user_name LIKE %userName% |
| æ‰€å±å…¥åŠ› | GET /api/v1/base-accounts/search | æœç´¢æ‰€å± | m_base_accounts | affiliation LIKE %affiliation% |
| æ¨©é™é¸æŠ | GET /api/v1/base-accounts/search | ç­›é€‰æƒé™ | m_base_accounts | permission = 'permission' |
| çµæœãƒ†ãƒ¼ãƒ–ãƒ« | GET /api/v1/base-accounts/search | è·å–è´¦æˆ·åˆ—è¡¨ | m_base_accounts | å­—æ®µç›´æ¥æ˜ å°„ |
| ï¼‹æ–°è¦è¿½åŠ  | GET/POST /api/v1/external/azure-ad/users/search | AzureADç”¨æˆ·æœç´¢ | å¤–éƒ¨ç³»ç»Ÿ | æ•°æ®åŒæ­¥ |
| ï¼‹æ–°è¦è¿½åŠ  | POST /api/v1/base-accounts | åˆ›å»ºæ–°è´¦æˆ· | m_base_accounts | å­—æ®µç›´æ¥æ˜ å°„ |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼IDåˆ— | GET /api/v1/base-accounts/{userId} | è·å–è¯¦æƒ… | m_base_accounts | user_id â†’ userId |

#### 5.6.2 å…³ç³»è¯´æ˜

**é¡µé¢åŠ è½½æµç¨‹**ï¼š
1. ç”¨æˆ·è®¿é—®b14é¡µé¢
2. é¡µé¢åˆå§‹åŒ–ï¼Œç©ºæœç´¢æ¡ä»¶
3. è‡ªåŠ¨æ‰§è¡Œå…¨ä»¶æœç´¢ GET /api/v1/base-accounts/search
4. APIä»m_base_accountsè·å–æ‰€æœ‰è´¦æˆ·æ•°æ®
5. è¿”å›åˆ†é¡µç»“æœå’Œç»Ÿè®¡ä¿¡æ¯
6. è¡¨æ ¼æ¸²æŸ“ç»“æœ

**æœç´¢æ‰§è¡Œæµç¨‹**ï¼š
1. ç”¨æˆ·è¾“å…¥æœç´¢æ¡ä»¶æˆ–é€‰æ‹©ç­›é€‰æ¡ä»¶
2. ç‚¹å‡»æ¤œç´¢æŒ‰é’®
3. æ„å»ºæŸ¥è¯¢å‚æ•°ï¼ˆæ”¯æŒå¤šæ¡ä»¶ANDé€»è¾‘ï¼‰
4. è°ƒç”¨æœç´¢API
5. åç«¯åœ¨m_base_accountsä¸Šæ‰§è¡Œå¸¦æ¡ä»¶çš„åˆ†é¡µæŸ¥è¯¢
6. è¿”å›ç¬¦åˆæ¡ä»¶çš„ç»“æœ

**æ•°æ®è¡¨å…³ç³»ï¼ˆERå›¾ï¼‰**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     m_base_accounts                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK: id                                                       â”‚
â”‚    user_id (UNIQUE)                                          â”‚
â”‚    user_name                                                 â”‚
â”‚    email (UNIQUE)                                            â”‚
â”‚    affiliation                                               â”‚
â”‚    permission                                               â”‚
â”‚    account_status                                           â”‚
â”‚    azure_ad_id                                              â”‚
â”‚    roles[]                                                   â”‚
â”‚    permissions[]                                            â”‚
â”‚    last_login_at                                            â”‚
â”‚    created_at                                               â”‚
â”‚    updated_at                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ 1:N
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                m_base_account_audit_log                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK: id                                                       â”‚
â”‚ FK: user_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º m_base_accounts          â”‚
â”‚    action                                                   â”‚
â”‚    before_value                                             â”‚
â”‚    after_value                                              â”‚
â”‚    performed_by                                             â”‚
â”‚    performed_at                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å­—æ®µæ˜ å°„é€»è¾‘**ï¼š
- m_base_accounts.permission (ENUM) â†” API permission ('ç®¡ç†è€…'|'å½¹å‰²è€…'|'é…è»Šæ‹…å½“è€…'|'è¨ˆä¸Šæ‹…å½“è€…')
- m_base_accounts.account_status (ENUM) â†” API accountStatus ('æœ‰åŠ¹'|'ç„¡åŠ¹')
- m_base_accounts.roles (TEXT[]) â†” API roles (string[])
- m_base_accounts.permissions (TEXT[]) â†” API permissions (string[])

#### 5.6.3 æ•°æ®æµå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ç”¨æˆ·æ“ä½œå±‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚æ¤œç´¢æ¡ä»¶å…¥åŠ›â”‚    â”‚æ¤œç´¢ãƒœã‚¿ãƒ³ â”‚    â”‚ï¾ƒï½±ï½¸ï½¶ï½³ï¾ï¾„é¸æŠ â”‚    â”‚ï¼‹æ–°è¦è¿½åŠ â”‚              â”‚
â”‚  â”‚  Form    â”‚    â”‚  Button  â”‚    â”‚ Tableè¡Œ  â”‚    â”‚  Button  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚              â”‚
        â”‚ GET          â”‚ POST         â”‚ GET          â”‚ POST
        â–¼              â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           React Frontend                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  BaseAccountSearchPage.tsx                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚ SearchForm  â”‚  â”‚ResultTable  â”‚  â”‚  Pagination Component       â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ (æœç´¢è¡¨å•)  â”‚  â”‚(ç»“æœè¡¨æ ¼)   â”‚  â”‚  (åˆ†é¡µç»„ä»¶)                 â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚
        â”‚ GET/POST     â”‚ GET          â”‚ GET
        â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         REST API Layer                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  GET /api/v1/base-accounts/search                                     â”‚   â”‚
â”‚  â”‚  GET /api/v1/base-accounts/{userId}                                   â”‚   â”‚
â”‚  â”‚  POST /api/v1/base-accounts                                            â”‚   â”‚
â”‚  â”‚  GET /api/v1/external/azure-ad/users/search                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚
        â”‚ SQL SELECT   â”‚ SQL INSERT   â”‚ External API
        â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Database Layer (PostgreSQL)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚       m_base_accounts                   â”‚  â”‚  m_base_account_audit_log  â”‚  â”‚
â”‚  â”‚       (åŸºç¡€è´¦æˆ·ä¸»è¡¨)                    â”‚  â”‚  (è´¦æˆ·æ“ä½œå®¡è®¡æ—¥å¿—è¡¨)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                              â”‚                                â”‚
â”‚                                              â”‚ FK                             â”‚
â”‚                                              â–¼                                â”‚
â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                                    â”‚   AzureAD (å¤–éƒ¨ç³»ç»Ÿ)       â”‚            â”‚
â”‚                                    â”‚   (ç”¨æˆ·ä¿¡æ¯æº)            â”‚            â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.6.4 æ ¸å¿ƒæ•°æ®åº“è¡¨ç»“æ„

**m_base_accountsï¼ˆåŸºç¡€è´¦æˆ·ä¸»è¡¨ï¼‰**

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | BIGSERIAL | PK | - | è‡ªå¢ID |
| user_id | VARCHAR(50) | UNIQUE, NOT NULL | - | ç”¨æˆ·ID |
| user_name | VARCHAR(200) | NOT NULL | - | AzureADç”¨æˆ·å |
| email | VARCHAR(200) | UNIQUE, NOT NULL | - | é‚®ç®±åœ°å€ |
| affiliation | VARCHAR(200) | NULL | - | æ‰€å±ãƒ™ãƒ¼ã‚¹å |
| permission | ENUM | NOT NULL | 'å½¹å‰²è€…' | æ¨©é™åŒºåˆ† |
| account_status | ENUM('æœ‰åŠ¹','ç„¡åŠ¹') | NOT NULL | 'æœ‰åŠ¹' | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆçŠ¶æ…‹ |
| azure_ad_id | VARCHAR(100) | NULL | - | AzureADã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆID |
| roles | TEXT[] | NULL | - | å½¹å‰²ãƒªã‚¹ãƒˆ |
| permissions | TEXT[] | NULL | - | æ¨©é™ãƒªã‚¹ãƒˆ |
| last_login_at | TIMESTAMP | NULL | - | æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚ |
| created_at | TIMESTAMP | NOT NULL | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | TIMESTAMP | NOT NULL | CURRENT_TIMESTAMP | æ›´æ–°æ—¶é—´ |

**m_base_account_audit_logï¼ˆåŸºç¡€è´¦æˆ·æ“ä½œå®¡è®¡æ—¥å¿—è¡¨ï¼‰**

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | BIGSERIAL | PK | - | æ—¥å¿—ID |
| user_id | VARCHAR(50) | FK â†’ m_base_accounts, NOT NULL | - | å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| action | VARCHAR(50) | NOT NULL | - | æ“ä½œåŒºåˆ† |
| before_value | TEXT | NULL | - | å¤‰æ›´å‰å€¤ |
| after_value | TEXT | NULL | - | å¤‰æ›´å¾Œå€¤ |
| performed_by | VARCHAR(100) | NOT NULL | - | å®Ÿè¡Œè€… |
| performed_at | TIMESTAMP | NOT NULL | CURRENT_TIMESTAMP | æ‰§è¡Œæ—¶é—´ |

**å…³è”å…³ç³»è¯´æ˜**ï¼š
- `m_base_accounts` ä¸ºç‹¬ç«‹ä¸»è¡¨ï¼Œè®°å½•åŸºç¡€è´¦æˆ·ä¿¡æ¯
- `m_base_account_audit_log` ä¸ `m_base_accounts` ä¸º N:1 å…³ç³»ï¼ˆä¸€ä¸ªè´¦æˆ·æœ‰å¤šä¸ªæ“ä½œæ—¥å¿—ï¼‰
- åˆ é™¤è´¦æˆ·æ—¶ï¼Œé€šè¿‡çº§è”åˆ é™¤è‡ªåŠ¨åˆ é™¤å…³è”çš„å®¡è®¡æ—¥å¿—è®°å½•

**ç´¢å¼•ä¼˜åŒ–**ï¼š
- idx_base_account_user_id: ç”¨äºç”¨æˆ·IDç²¾ç¡®/æ¨¡ç³ŠæŸ¥è¯¢
- idx_base_account_email: ç”¨äºé‚®ç®±æŸ¥è¯¢
- idx_base_account_affiliation: ç”¨äºæ‰€å±æŸ¥è¯¢
- idx_base_account_permission: ç”¨äºæƒé™ç­›é€‰
- idx_base_account_status: ç”¨äºçŠ¶æ€ç­›é€‰
- idx_base_account_permission_status: ç”¨äºæƒé™+çŠ¶æ€å¤åˆç­›é€‰

```typescript
interface ApiErrorResponse {
  success: false;
  error: {
    code: ErrorCode;
    message: string;
    details?: Record<string, unknown>;
  };
}

type ErrorCode =
  | 'INVALID_PARAMETER'
  | 'ACCOUNT_NOT_FOUND'
  | 'DUPLICATE_ACCOUNT'
  | 'PERMISSION_DENIED'
  | 'EXTERNAL_SYSTEM_ERROR'
  | 'INVALID_SEARCH_CONDITION'
  | 'RATE_LIMIT_EXCEEDED'
  | 'INTERNAL_ERROR';
```

---

## 6. å‰ç«¯å®ç°

### 6.1 ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```typescript
// BaseAccountSearchPage.tsx
import React, { useState, useEffect, useCallback } from 'react';
import { useNavigate } from 'react-router-dom';
import {
  Form,
  Input,
  Radio,
  Button,
  Table,
  Tag,
  Pagination,
  Space,
  Card,
  Statistic,
  Row,
  Col,
  message,
  Tooltip,
} from 'antd';
import {
  SearchOutlined,
  PlusOutlined,
  ReloadOutlined,
  FilterOutlined,
} from '@ant-design/icons';
import { BaseAccountInfo, SearchBaseAccountsRequest, PermissionType } from '../../types/baseAccount';
import { searchBaseAccounts, getAzureADUsers } from '../../api/baseAccount';
import { PermissionTag } from '../../components/PermissionTag';
import { StatusTag } from '../../components/StatusTag';
import styles from './BaseAccountSearchPage.module.css';

const { RangePicker } = DatePicker;

type PermissionOption = 'ç®¡ç†è€…' | 'å½¹å‰²è€…' | 'é…è»Šæ‹…å½“è€…' | 'è¨ˆä¸Šæ‹…å½“è€…';

export const BaseAccountSearchPage: React.FC = () => {
  const [form] = Form.useForm();
  const navigate = useNavigate();
  const [data, setData] = useState<BaseAccountInfo[]>([]);
  const [loading, setLoading] = useState(false);
  const [pagination, setPagination] = useState({
    current: 1,
    pageSize: 20,
    total: 0,
  });
  const [summary, setSummary] = useState({
    totalCount: 0,
    adminCount: 0,
    operatorCount: 0,
  });
  const [filters, setFilters] = useState<SearchBaseAccountsRequest>({});

  const fetchData = useCallback(async (params: SearchBaseAccountsRequest) => {
    setLoading(true);
    try {
      const response = await searchBaseAccounts({
        ...params,
        page: params.page || 1,
        pageSize: params.pageSize || 20,
      });

      if (response.success) {
        setData(response.data.accounts);
        setPagination(prev => ({
          ...prev,
          total: response.data.pagination.totalItems,
        }));
        setSummary({
          totalCount: response.data.summary.totalCount,
          adminCount: response.data.summary.adminCount,
          operatorCount: response.data.summary.operatorCount,
        });
      } else {
        message.error(response.error?.message || 'æ¤œç´¢ã«å¤±æ•—ã—ã¾ã—ãŸ');
      }
    } catch (error) {
      message.error('ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
      console.error('Search error:', error);
    } finally {
      setLoading(false);
    }
  }, []);

  useEffect(() => {
    fetchData({ page: 1 });
  }, [fetchData]);

  const handleSearch = (values: any) => {
    const searchParams: SearchBaseAccountsRequest = {
      ...values,
      page: 1,
      pageSize: pagination.pageSize,
    };
    setFilters(searchParams);
    fetchData(searchParams);
  };

  const handleReset = () => {
    form.resetFields();
    setFilters({});
    fetchData({ page: 1, pageSize: pagination.pageSize });
  };

  const handlePageChange = (page: number, pageSize?: number) => {
    setPagination(prev => ({
      ...prev,
      current: page,
      pageSize: pageSize || prev.pageSize,
    }));
    fetchData({
      ...filters,
      page,
      pageSize: pageSize || pagination.pageSize,
    });
  };

  const handleViewDetail = (userId: string) => {
    navigate(`/b15/${userId}`);
  };

  const handleAddAccount = () => {
    navigate('/b14/new');
  };

  const columns = [
    {
      title: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ID',
      dataIndex: 'userId',
      key: 'userId',
      width: 150,
      sorter: true,
      render: (userId: string) => (
        <Button
          type="link"
          onClick={() => handleViewDetail(userId)}
          className={styles.userIdLink}
        >
          {userId}
        </Button>
      ),
    },
    {
      title: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼å',
      dataIndex: 'userName',
      key: 'userName',
      width: 180,
      sorter: true,
      render: (text: string) => (
        <Tooltip title={text}>
          <span className={styles.truncateText}>{text}</span>
        </Tooltip>
      ),
    },
    {
      title: 'æ‰€å±',
      dataIndex: 'affiliation',
      key: 'affiliation',
      width: 150,
      sorter: true,
      render: (text: string) => (
        <Tooltip title={text}>
          <span className={styles.truncateText}>{text}</span>
        </Tooltip>
      ),
    },
    {
      title: 'æ¨©é™',
      dataIndex: 'permission',
      key: 'permission',
      width: 120,
      sorter: true,
      render: (permission: PermissionType) => (
        <PermissionTag permission={permission} />
      ),
    },
    {
      title: 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆçŠ¶æ…‹',
      dataIndex: 'accountStatus',
      key: 'accountStatus',
      width: 120,
      sorter: true,
      render: (status: string) => <StatusTag status={status} />,
    },
    {
      title: 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹',
      dataIndex: 'email',
      key: 'email',
      width: 250,
      sorter: true,
      render: (email: string) => (
        <Tooltip title={email}>
          <span className={styles.truncateText}>{email}</span>
        </Tooltip>
      ),
    },
  ];

  return (
    <div className={styles.container}>
      <Card title="ãƒ™ãƒ¼ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒã‚¹ã‚¿æ¤œç´¢" className={styles.searchCard}>
        <Form
          form={form}
          layout="horizontal"
          onFinish={handleSearch}
          initialValues={{
            permission: undefined,
          }}
        >
          <Row gutter={16}>
            <Col xs={24} sm={12} md={8} lg={6}>
              <Form.Item
                name="userId"
                label="ãƒ¦ãƒ¼ã‚¶ãƒ¼ID"
                className={styles.formItem}
              >
                <Input
                  placeholder="AzureADã®ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’å…¥åŠ›"
                  allowClear
                  maxLength={50}
                />
              </Form.Item>
            </Col>

            <Col xs={24} sm={12} md={8} lg={6}>
              <Form.Item
                name="email"
                label="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"
                className={styles.formItem}
              >
                <Input
                  placeholder="AzureADã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›"
                  allowClear
                  maxLength={200}
                />
              </Form.Item>
            </Col>

            <Col xs={24} sm={12} md={8} lg={6}>
              <Form.Item
                name="userName"
                label="ãƒ¦ãƒ¼ã‚¶ãƒ¼å"
                className={styles.formItem}
              >
                <Input
                  placeholder="AzureADã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å…¥åŠ›"
                  allowClear
                  maxLength={200}
                />
              </Form.Item>
            </Col>

            <Col xs={24} sm={12} md={8} lg={6}>
              <Form.Item
                name="affiliation"
                label="æ‰€å±"
                className={styles.formItem}
              >
                <Input
                  placeholder="æ‰€å±ãƒ™ãƒ¼ã‚¹åã‚’å…¥åŠ›"
                  allowClear
                  maxLength={200}
                />
              </Form.Item>
            </Col>

            <Col xs={24} sm={12} md={8} lg={6}>
              <Form.Item
                name="permission"
                label="æ¨©é™"
                className={styles.formItem}
              >
                <Radio.Group>
                  <Radio value="ç®¡ç†è€…">ç®¡ç†è€…</Radio>
                  <Radio value="å½¹å‰²è€…">å½¹å‰²è€…</Radio>
                  <Radio value="é…è»Šæ‹…å½“è€…">é…è»Šæ‹…å½“è€…</Radio>
                  <Radio value="è¨ˆä¸Šæ‹…å½“è€…">è¨ˆä¸Šæ‹…å½“è€…</Radio>
                </Radio.Group>
              </Form.Item>
            </Col>
          </Row>

          <div className={styles.buttonGroup}>
            <Button
              type="primary"
              htmlType="submit"
              icon={<SearchOutlined />}
              loading={loading}
            >
              æ¤œç´¢
            </Button>
            <Button onClick={handleReset}>
              ãƒªã‚»ãƒƒãƒˆ
            </Button>
            <Button
              icon={<ReloadOutlined />}
              onClick={() => fetchData(filters)}
              loading={loading}
            >
              å†èª­è¾¼
            </Button>
          </div>
        </Form>
      </Card>

      {summary.totalCount > 0 && (
        <div className={styles.summary}>
          <Row gutter={16}>
            <Col span={6}>
              <Statistic
                title="åˆè¨ˆä»¶æ•°"
                value={summary.totalCount}
                suffix="ä»¶"
              />
            </Col>
            <Col span={6}>
              <Statistic
                title="ç®¡ç†è€…"
                value={summary.adminCount}
                valueStyle={{ color: '#f5222d' }}
              />
            </Col>
            <Col span={6}>
              <Statistic
                title="ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼"
                value={summary.operatorCount}
                valueStyle={{ color: '#1890ff' }}
              />
            </Col>
          </Row>
        </div>
      )}

      <Card
        className={styles.resultCard}
        extra={
          <Button
            type="primary"
            icon={<PlusOutlined />}
            onClick={handleAddAccount}
          >
            ï¼‹æ–°è¦è¿½åŠ 
          </Button>
        }
      >
        <Table
          columns={columns}
          dataSource={data}
          rowKey="userId"
          loading={loading}
          pagination={false}
          scroll={{ x: 1000 }}
          locale={{
            emptyText: 'æ¤œç´¢æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒã‚ã‚Šã¾ã›ã‚“',
          }}
          onChange={(paginationConfig, filters, sorter) => {
            const sortField = Array.isArray(sorter) ? sorter[0]?.field : sorter.field;
            const sortOrder = Array.isArray(sorter) ? sorter[0]?.order : sorter.order;
            
            if (sortField && sortOrder) {
              fetchData({
                ...filters,
                sort: sortField as string,
                sortOrder: sortOrder === 'ascend' ? 'asc' : 'desc',
              });
            }
          }}
        />

        {pagination.total > 0 && (
          <div className={styles.pagination}>
            <Pagination
              current={pagination.current}
              pageSize={pagination.pageSize}
              total={pagination.total}
              onChange={handlePageChange}
              onShowSizeChange={handlePageChange}
              showSizeChanger
              showQuickJumper
              showTotal={(total, range) => (
                `${range[0]}-${range[1]} / ${total}ä»¶`
              )}
              pageSizeOptions={['10', '20', '50', '100']}
            />
          </div>
        )}
      </Card>
    </div>
  );
};
```

### 6.2 APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

```typescript
// baseAccountApi.ts
import axios, { AxiosRequestConfig } from 'axios';
import {
  SearchBaseAccountsRequest,
  SearchBaseAccountsResponse,
  GetBaseAccountDetailResponse,
  CreateBaseAccountRequest,
  CreateBaseAccountResponse,
} from '../types/baseAccount';

const API_BASE_URL = '/api/v1';

const apiClient = axios.create({
  baseURL: API_BASE_URL,
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json',
  },
});

apiClient.interceptors.request.use((config) => {
  const token = localStorage.getItem('auth_token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  config.headers['X-CSRF-Token'] = getCsrfToken();
  return config;
});

apiClient.interceptors.response.use(
  (response) => response.data,
  (error) => {
    if (error.response?.status === 401) {
      window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);

export const searchBaseAccounts = async (
  params: SearchBaseAccountsRequest
): Promise<SearchBaseAccountsResponse> => {
  const queryString = new URLSearchParams();
  
  if (params.userId) queryString.append('userId', params.userId);
  if (params.email) queryString.append('email', params.email);
  if (params.userName) queryString.append('userName', params.userName);
  if (params.affiliation) queryString.append('affiliation', params.affiliation);
  if (params.permission) queryString.append('permission', params.permission);
  if (params.page) queryString.append('page', params.page.toString());
  if (params.pageSize) queryString.append('pageSize', params.pageSize.toString());
  if (params.sort) queryString.append('sort', params.sort);
  if (params.sortOrder) queryString.append('sortOrder', params.sortOrder);

  return apiClient.get(`/base-accounts/search?${queryString.toString()}`);
};

export const getBaseAccountDetail = async (
  userId: string
): Promise<GetBaseAccountDetailResponse> => {
  return apiClient.get(`/base-accounts/${userId}`);
};

export const createBaseAccount = async (
  request: CreateBaseAccountRequest
): Promise<CreateBaseAccountResponse> => {
  return apiClient.post('/base-accounts', request);
};

const getCsrfToken = () => {
  const metaTag = document.querySelector('meta[name="csrf-token"]');
  return metaTag ? metaTag.getAttribute('content') : '';
};
```

---

## 7. åç«¯æœåŠ¡è®¾è®¡

### 7.1 Controller

```java
@RestController
@RequestMapping("/api/v1/base-accounts")
@RequiredArgsConstructor
@Validated
public class BaseAccountController {

    private final BaseAccountService baseAccountService;
    private final AzureADService azureADService;

    @GetMapping("/search")
    @ResponseStatus(HttpStatus.OK)
    public ResponseEntity<SearchBaseAccountsResponse> searchAccounts(
            @Valid @ModelAttribute SearchBaseAccountsRequest request) {
        SearchBaseAccountsResponse response = baseAccountService.searchAccounts(request);
        return ResponseEntity.ok(response);
    }

    @GetMapping("/{userId}")
    @ResponseStatus(HttpStatus.OK)
    public ResponseEntity<GetBaseAccountDetailResponse> getAccountDetail(
            @PathVariable @NotBlank String userId) {
        GetBaseAccountDetailResponse response = baseAccountService.getAccountDetail(userId);
        return ResponseEntity.ok(response);
    }

    @PostMapping
    @ResponseStatus(HttpStatus.CREATED)
    public ResponseEntity<CreateBaseAccountResponse> createAccount(
            @Valid @RequestBody CreateBaseAccountRequest request) {
        CreateBaseAccountResponse response = baseAccountService.createAccount(request);
        return ResponseEntity.ok(response);
    }
}
```

### 7.2 Service

```java
@Service
@RequiredArgsConstructor
@Slf4j
public class BaseAccountService {

    private final BaseAccountRepository baseAccountRepository;

    @Transactional(readOnly = true)
    public SearchBaseAccountsResponse searchAccounts(SearchBaseAccountsRequest request) {
        Specification<BaseAccount> spec = Specification.where(null);

        if (StringUtils.hasText(request.getUserId())) {
            spec = spec.and((root, query, cb) ->
                cb.like(cb.lower(root.get("userId")), "%" + request.getUserId().toLowerCase() + "%"));
        }

        if (StringUtils.hasText(request.getEmail())) {
            spec = spec.and((root, query, cb) ->
                cb.like(cb.lower(root.get("email")), "%" + request.getEmail().toLowerCase() + "%"));
        }

        if (StringUtils.hasText(request.getUserName())) {
            spec = spec.and((root, query, cb) ->
                cb.like(cb.lower(root.get("userName")), "%" + request.getUserName().toLowerCase() + "%"));
        }

        if (StringUtils.hasText(request.getAffiliation())) {
            spec = spec.and((root, query, cb) ->
                cb.like(cb.lower(root.get("affiliation")), "%" + request.getAffiliation().toLowerCase() + "%"));
        }

        if (request.getPermission() != null) {
            spec = spec.and((root, query, cb) ->
                cb.equal(root.get("permission"), PermissionType.valueOf(request.getPermission())));
        }

        Sort sort = Sort.by(Sort.Direction.ASC, "userId");
        if (StringUtils.hasText(request.getSort()) && request.getSortOrder() != null) {
            Sort.Direction direction = "asc".equalsIgnoreCase(request.getSortOrder())
                ? Sort.Direction.ASC : Sort.Direction.DESC;
            sort = Sort.by(direction, request.getSort());
        }

        Pageable pageable = PageRequest.of(
            request.getPage() != null ? request.getPage() - 1 : 0,
            request.getPageSize() != null ? request.getPageSize() : 20,
            sort);

        Page<BaseAccount> resultPage = baseAccountRepository.findAll(spec, pageable);

        List<BaseAccountInfo> accounts = resultPage.getContent().stream()
                .map(account -> BaseAccountInfo.builder()
                        .userId(account.getUserId())
                        .userName(account.getUserName())
                        .affiliation(account.getAffiliation())
                        .permission(account.getPermission().getValue())
                        .accountStatus(account.getAccountStatus().getValue())
                        .email(account.getEmail())
                        .createdAt(account.getCreatedAt().toString())
                        .lastLoginAt(account.getLastLoginAt()?.toString())
                        .build())
                .collect(Collectors.toList());

        SearchBaseAccountsSummary summary = calculateSummary(baseAccountRepository.findAll(spec));

        return SearchBaseAccountsResponse.builder()
                .success(true)
                .data(SearchBaseAccountsResponse.SearchResultData.builder()
                        .accounts(accounts)
                        .pagination(PaginationInfo.builder()
                                .currentPage(request.getPage() != null ? request.getPage() : 1)
                                .pageSize(request.getPageSize() != null ? request.getPageSize() : 20)
                                .totalItems((int) resultPage.getTotalElements())
                                .totalPages(resultPage.getTotalPages())
                                .build())
                        .summary(summary)
                        .build())
                .build();
    }

    private SearchBaseAccountsSummary calculateSummary(List<BaseAccount> accounts) {
        long adminCount = accounts.stream()
                .filter(a -> a.getPermission() == PermissionType.ç®¡ç†è€…)
                .count();
        long operatorCount = accounts.stream()
                .filter(a -> a.getPermission() != PermissionType.ç®¡ç†è€…)
                .count();

        return SearchBaseAccountsSummary.builder()
                .totalCount(accounts.size())
                .adminCount((int) adminCount)
                .operatorCount((int) operatorCount)
                .build();
    }
}
```

---

## 8. æ•°æ®åº“è¡¨è®¾è®¡

### 8.1 base_accountsãƒ†ãƒ¼ãƒ–ãƒ«

```sql
CREATE TABLE base_accounts (
    id BIGSERIAL PRIMARY KEY,
    user_id VARCHAR(50) NOT NULL UNIQUE COMMENT 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ID',
    user_name VARCHAR(200) NOT NULL COMMENT 'AzureADãƒ¦ãƒ¼ã‚¶ãƒ¼å',
    email VARCHAR(200) NOT NULL UNIQUE COMMENT 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹',
    affiliation VARCHAR(200) COMMENT 'æ‰€å±ãƒ™ãƒ¼ã‚¹å',
    permission ENUM('ç®¡ç†è€…', 'å½¹å‰²è€…', 'é…è»Šæ‹…å½“è€…', 'è¨ˆä¸Šæ‹…å½“è€…') NOT NULL DEFAULT 'å½¹å‰²è€…' COMMENT 'æ¨©é™åŒºåˆ†',
    account_status ENUM('æœ‰åŠ¹', 'ç„¡åŠ¹') NOT NULL DEFAULT 'æœ‰åŠ¹' COMMENT 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆçŠ¶æ…‹',
    azure_ad_id VARCHAR(100) COMMENT 'AzureADã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆID',
    roles TEXT[] COMMENT 'å½¹å‰²ãƒªã‚¹ãƒˆ',
    permissions TEXT[] COMMENT 'æ¨©é™ãƒªã‚¹ãƒˆ',
    last_login_at TIMESTAMP COMMENT 'æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚',
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_base_account_user_id (user_id),
    INDEX idx_base_account_email (email),
    INDEX idx_base_account_affiliation (affiliation),
    INDEX idx_base_account_permission (permission),
    INDEX idx_base_account_status (account_status),
    INDEX idx_base_account_azure_ad_id (azure_ad_id),
    INDEX idx_base_account_permission_status (permission, account_status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ãƒ™ãƒ¼ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒã‚¹ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«';
```

### 8.2 base_account_audit_logãƒ†ãƒ¼ãƒ–ãƒ«

```sql
CREATE TABLE base_account_audit_log (
    id BIGSERIAL PRIMARY KEY,
    user_id VARCHAR(50) NOT NULL COMMENT 'å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ID',
    action VARCHAR(50) NOT NULL COMMENT 'æ“ä½œåŒºåˆ†',
    before_value TEXT COMMENT 'å¤‰æ›´å‰å€¤',
    after_value TEXT COMMENT 'å¤‰æ›´å¾Œå€¤',
    performed_by VARCHAR(100) NOT NULL COMMENT 'å®Ÿè¡Œè€…',
    performed_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_audit_user_id (user_id),
    INDEX idx_audit_performed_at (performed_at),
    
    FOREIGN KEY (user_id) REFERENCES base_accounts(user_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ãƒ™ãƒ¼ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ“ä½œç›£æŸ»ãƒ­ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«';
```

---

## 9. éªŒæ”¶æ ‡å‡†

### 9.1 åŠŸèƒ½éªŒæ”¶

| æµ‹è¯•åœºæ™¯ | é¢„æœŸç»“æœ | ä¼˜å…ˆçº§ |
|----------|----------|--------|
| é¡µé¢åˆå§‹åŠ è½½ | æ˜¾ç¤ºå…¨è´¦æˆ·åˆ—è¡¨ï¼ŒåŠ è½½é€Ÿåº¦<2ç§’ | P0 |
| ç”¨æˆ·IDæœç´¢ | æ”¯æŒéƒ¨åˆ†åŒ¹é…æœç´¢ | P0 |
| é‚®ç®±æœç´¢ | æ”¯æŒéƒ¨åˆ†åŒ¹é…æœç´¢ | P0 |
| ç”¨æˆ·åæœç´¢ | æ”¯æŒéƒ¨åˆ†åŒ¹é…æœç´¢ | P0 |
| æ‰€å±æœç´¢ | æ”¯æŒéƒ¨åˆ†åŒ¹é…æœç´¢ | P0 |
| æƒé™ç­›é€‰ | æ­£ç¡®ç­›é€‰æŒ‡å®šæƒé™è´¦æˆ· | P0 |
| ç»„åˆæ¡ä»¶æœç´¢ | å¤šæ¡ä»¶ANDé€»è¾‘æ­£ç¡® | P0 |
| åˆ†é¡µåŠŸèƒ½ | æ­£å¸¸ç¿»é¡µï¼Œæ¯é¡µå¤§å°åˆ‡æ¢ | P0 |
| æ’åºåŠŸèƒ½ | å„åˆ—ç‚¹å‡»æ’åºæ­£å¸¸ | P0 |
| æŸ¥çœ‹è¯¦æƒ… | è·³è½¬åˆ°è´¦æˆ·è¯¦æƒ…é¡µ | P0 |
| æ–°è¦è¿½åŠ  | è·³è½¬åˆ°æ–°å¢é¡µé¢ | P0 |
| ç©ºçŠ¶æ€æ˜¾ç¤º | æ— æ•°æ®æ—¶æ˜¾ç¤ºå‹å¥½æç¤º | P0 |
| é”™è¯¯å¤„ç† | ç½‘ç»œé”™è¯¯æ—¶æ˜¾ç¤ºå‹å¥½æç¤º | P0 |

### 9.2 è§†è§‰éªŒæ”¶

| é¡¹ç›® | è¦æ±‚ |
|------|------|
| å¸ƒå±€ | ä¸è®¾è®¡ç¨¿ä¸€è‡´ |
| é¢œè‰² | æƒé™æ ‡ç­¾é¢œè‰²æ­£ç¡® |
| é—´è· | ç¬¦åˆUIè§„èŒƒ |
| å­—ä½“ | å¤§å°ã€é¢œè‰²æ­£ç¡® |

### 9.3 æ€§èƒ½éªŒæ”¶

| æŒ‡æ ‡ | è¦æ±‚ | æµ‹è¯•æ–¹æ³• |
|------|------|----------|
| é¡µé¢åŠ è½½ | <2ç§’ | Lighthouse |
| æœç´¢å“åº” | <1ç§’ | APIç›‘æ§ |
| è¡¨æ ¼æ¸²æŸ“ | <500ms | æµè§ˆå™¨DevTools |
| åˆ†é¡µåˆ‡æ¢ | <300ms | ç”¨æˆ·ä½“éªŒæµ‹è¯• |

### 9.4 å®‰å…¨éªŒæ”¶

| æ£€æŸ¥é¡¹ | è¦æ±‚ |
|--------|------|
| æƒé™æ§åˆ¶ | åªæœ‰ç®¡ç†è€…èƒ½è®¿é—® |
| CSRFé˜²æŠ¤ | æ‰€æœ‰POSTè¯·æ±‚å¸¦Token |
| XSSé˜²æŠ¤ | ç”¨æˆ·è¾“å…¥æ­£ç¡®è½¬ä¹‰ |
| SQLæ³¨å…¥ | ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ |
| æ—¥å¿—å®¡è®¡ | æ“ä½œæ—¥å¿—è®°å½•å®Œæ•´ |

---

## 10. å˜æ›´æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|---------|------|
| 2026-02-10 | v1.0.1 | æ·»åŠ 5.6ç”»é¢-API-æ•°æ®åº“å…³ç³»æ˜ å°„è¡¨ | - |
| 2026-02-XX| v1.0 | åˆå§‹ç‰ˆæœ¬ | - |

---

## é™„å½•

### A.1 ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| å…¬å…±æŠ€æœ¯æ¶æ„è§„èŒƒ | [\_å…¬å…±æŠ€æœ¯æ¶æ„è§„èŒƒ.md](../_å…¬å…±æŠ€æœ¯æ¶æ„è§„èŒƒ.md) | å‰åç«¯æŠ€æœ¯æ¶æ„è¯¦ç»†è§„èŒƒ |
| b15-ãƒ™ãƒ¼ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè©³ç´° | [../b15-ãƒ™ãƒ¼ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè©³ç´°/05_è®¾è®¡è§„èŒƒ.md](../b15-ãƒ™ãƒ¼ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè©³ç´°/05_è®¾è®¡è§„èŒƒ.md) | è´¦æˆ·è¯¦æƒ…é¡µé¢ |
| b11-è¼¸é€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒã‚¹ã‚¿ä¸€è¦§ | [../b11-è¼¸é€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒã‚¹ã‚¿ä¸€è¦§/05_è®¾è®¡è¦ç¯„.md](../b11-è¼¸é€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒã‚¹ã‚¿ä¸€è¦§/05_è®¾è®¡è§„èŒƒ.md) | åˆä½œä¼™ä¼´å…¬å¸ä¸€è§ˆ |
| AzureADé€£æºä»•æ§˜ | ../docs/azuread_integration.md | AzureADé€£æºè¯¦ç»†è¯´æ˜ |

### A.2 é–¢é€£ç”»é¢é·ç§»

| ç”»é¢ | é·ç§»å…ƒ | é·ç§»å…ˆ | ãƒˆãƒªã‚¬ãƒ¼ | èª¬æ˜ |
|------|--------|--------|----------|------|
| b14 | - | - | - | åˆæœŸè¡¨ç¤ºç”»é¢ |
| b14 | - | b15 | ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚¯ãƒªãƒƒã‚¯ | è©³ç´°è¡¨ç¤º |
| b14 | - | b14/new | ï¼‹æ–°è¦è¿½åŠ  | æ–°è¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ² |

### A.3 APIè°ƒç”¨ç¤ºä¾‹

```bash
# ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ¤œç´¢
curl -X GET "https://api.example.com/api/v1/base-accounts/search?userId=U&permission=ç®¡ç†è€…&page=1&pageSize=20" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

```bash
# ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè©³ç´°å–å¾—
curl -X GET "https://api.example.com/api/v1/base-accounts/U001" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

```bash
# ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ–°è¦ä½œæˆ
curl -X POST "https://api.example.com/api/v1/base-accounts" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "U002",
    "userName": "å±±ç”°å¤ªéƒ",
    "email": "taro.yamada@example.com",
    "affiliation": "æ±äº¬ãƒ™ãƒ¼ã‚¹",
    "permission": "é…è»Šæ‹…å½“è€…",
    "accountStatus": "æœ‰åŠ¹"
  }'
```

---

**æ–‡æ¡£ç¼–åˆ¶**: -  
**ç¼–åˆ¶æ—¶é—´**: 2026-02-XX 
**é€‚ç”¨èŒƒå›´**: b14-ãƒ™ãƒ¼ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒã‚¹ã‚¿æ¤œç´¢ åŸºç¡€è´¦æˆ·æœç´¢é¡µé¢  
**äº¤å‰å¼•ç”¨**: [\_å…¬å…±æŠ€æœ¯æ¶æ„è§„èŒƒ.md](../_å…¬å…±æŠ€æœ¯æ¶æ„è§„èŒƒ.md)
