# p5-è«‹æ±‚æ¤œç´¢ - è®¾è®¡è§„èŒƒ

## 1. åŠŸèƒ½æ¦‚è¿°

### 1.1 æ–‡æ¡£ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| **å·¥ä½œè¡¨åç§°** | p5-è«‹æ±‚æ¤œç´¢ |
| **ç•Œé¢ç¼–å·** | p5 |
| **æ–‡æ¡£ç‰ˆæœ¬** | v1.0 |
| **æœ€åæ›´æ–°** | 2026-02-10 |
| **æ–‡æ¡£çŠ¶æ€** | âœ… å·²å‘å¸ƒ |

### 1.2 åŠŸèƒ½æè¿°

p5-è«‹æ±‚æ¤œç´¢ æ˜¯åˆä½œä¼™ä¼´ï¼ˆãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ï¼‰ä¾§çš„è´¦å•æœç´¢é¡µé¢ï¼Œæä¾›è´¦å•ä¿¡æ¯æŸ¥è¯¢ã€ç­›é€‰ã€åˆ†é¡µå±•ç¤ºå’Œè¯¦æƒ…æŸ¥çœ‹åŠŸèƒ½ã€‚åˆä½œä¼™ä¼´å¯ä»¥é€šè¿‡æ­¤é¡µé¢æŸ¥çœ‹å’Œç®¡ç†æ¥è‡ªãƒ™ãƒ¼ã‚¹ï¼ˆæ€»éƒ¨ï¼‰çš„è´¦å•ä¿¡æ¯ã€‚

### 1.3 æŠ€æœ¯æ¶æ„

æœ¬æ–‡æ¡£åŸºäº **å‰åç«¯åˆ†ç¦»æ¶æ„**ï¼Œè¯¦ç»†æŠ€æœ¯è§„èŒƒè¯·å‚è€ƒï¼š

ğŸ‘‰ **[\_å…¬å…±æŠ€æœ¯æ¶æ„è§„èŒƒ.md](../_å…¬å…±æŠ€æœ¯æ¶æ„è§„èŒƒ.md)**

| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| å‰ç«¯ | React 18.x + TypeScript + Ant Design |
| åç«¯ | Spring Boot 3.x + Java 17 |
| æ•°æ®åº“ | PostgreSQL 15.x |

### 1.4 æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ |
|------|------|--------|
| å¤šæ¡ä»¶æœç´¢ | æŒ‰å¹´æœˆã€è´¦å•IDã€çŠ¶æ€ç­‰æœç´¢ | P0 |
| åˆ†é¡µå±•ç¤º | è¡¨æ ¼åˆ†é¡µå±•ç¤ºæœç´¢ç»“æœ | P0 |
| æ’åºåŠŸèƒ½ | å„åˆ—æ’åºæ”¯æŒ | P0 |
| è´¦å•è¯¦æƒ… | æŸ¥çœ‹è´¦å•è¯¦ç»†ä¿¡æ¯ | P0 |
| å¯¼å‡ºåŠŸèƒ½ | CSV/Excelæ ¼å¼å¯¼å‡º | P1 |
| çŠ¶æ€æ˜¾ç¤º | å½©è‰²æ ‡ç­¾æ˜¾ç¤ºè´¦å•çŠ¶æ€ | P0 |

### 1.5 é€‚ç”¨èŒƒå›´

- å‰ç«¯å¼€å‘äººå‘˜ï¼ˆæœç´¢é¡µé¢ç»„ä»¶å®ç°ï¼‰
- åç«¯å¼€å‘äººå‘˜ï¼ˆè´¦å•APIå¼€å‘ï¼‰
- æµ‹è¯•å·¥ç¨‹å¸ˆï¼ˆåŠŸèƒ½æµ‹è¯•ï¼‰
- äº§å“ç»ç†ï¼ˆåŠŸèƒ½ç¡®è®¤ï¼‰

---

## 2. é¡µé¢å…ƒç´ 

### 2.1 å…ƒç´ æ¸…å•

| åºå· | å…ƒç´ åç§° | å…ƒç´ ç±»å‹ | åŠŸèƒ½è¯´æ˜ | äº¤äº’è§¦å‘ |
|------|----------|----------|----------|----------|
| â‘´ | æ¤œç´¢æ¡ä»¶ã‚¨ãƒªã‚¢ | ãƒ•ã‚©ãƒ¼ãƒ  | å¹´æœˆ/è«‹æ±‚ID/ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ› |
| â‘µ | å¹´æœˆã‚»ãƒ¬ã‚¯ãƒˆ | DatePicker.Month | å¯¾è±¡å¹´æœˆé¸æŠ | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é¸æŠ |
| â‘¶ | è«‹æ±‚IDå…¥åŠ› | Input | è«‹æ±‚IDéƒ¨åˆ†æ¤œç´¢ | æ–‡å­—å…¥åŠ› |
| â‘· | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é¸æŠ | Select | è«‹æ±‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é¸æŠ | ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³é¸æŠ |
| â‘¸ | æ¤œç´¢ãƒœã‚¿ãƒ³ | Primary Button | æ¤œç´¢å®Ÿè¡Œ | ã‚¯ãƒªãƒƒã‚¯ |
| â‘¹ | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³ | Default Button | ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ | ã‚¯ãƒªãƒƒã‚¯ |
| â‘º | çµæœãƒ†ãƒ¼ãƒ–ãƒ« | Table | è«‹æ±‚ä¸€è¦§è¡¨ç¤º | è¡Œã‚¯ãƒªãƒƒã‚¯/ã‚½ãƒ¼ãƒˆ |
| â‘» | å¹´æœˆåˆ— | Column | è«‹æ±‚å¹´æœˆ | è¡¨ç¤º/ã‚½ãƒ¼ãƒˆ |
| â‘¼ | è«‹æ±‚IDåˆ— | Link Column | è«‹æ±‚ID | ã‚¯ãƒªãƒƒã‚¯â†’è©³ç´° |
| â‘½ | é‡‘é¡åˆ— | Column | è«‹æ±‚é‡‘é¡ | è¡¨ç¤º/ã‚½ãƒ¼ãƒˆ |
| â‘¾ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ— | Tag Column | è«‹æ±‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | Tagè¡¨ç¤º |
| â‘¿ | è«‹æ±‚æ—¥åˆ— | Column | è«‹æ±‚ç™ºè¡Œæ—¥ | è¡¨ç¤º/ã‚½ãƒ¼ãƒˆ |
| â’€ | æ“ä½œåˆ— | Button Column | è©³ç´°ãƒœã‚¿ãƒ³ | ã‚¯ãƒªãƒƒã‚¯â†’è©³ç´° |
| â’ | ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ | Pagination | ãƒšãƒ¼ã‚¸ãƒ³ã‚°æ“ä½œ | ã‚¯ãƒªãƒƒã‚¯ |
| â’‚ | åˆè¨ˆè¡¨ç¤º | Statistic | æ¤œç´¢çµæœåˆè¨ˆ | è¡¨ç¤º |

### 2.2 æ¤œç´¢æ¡ä»¶è¯¦ç»†è¯´æ˜

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | è¦ç´ ã‚¿ã‚¤ãƒ— | åˆ¶ç´„ | ãƒ‡ãƒ¼ã‚¿å½¢å¼ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|-----------|-----------|------|-----------|----------|
| å¹´æœˆ | DatePicker.Month | éå»12ãƒ¶æœˆ | YYYY-MM | å½“æœˆ |
| è«‹æ±‚ID | Input | åŠè§’è‹±æ•°å­—50æ–‡å­— | éƒ¨åˆ†ä¸€è‡´ | ç©º |
| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | Select | åˆ—æŒ™å€¤ | æœªè«‹æ±‚/è«‹æ±‚æ¸ˆ/æ”¯æ‰•æ¸ˆ/ã‚­ãƒ£ãƒ³ã‚»ãƒ« | ç©º |

### 2.3 çµæœãƒ†ãƒ¼ãƒ–ãƒ«è©³ç´°èª¬æ˜

| ã‚«ãƒ©ãƒ å | è¦ç´ ã‚¿ã‚¤ãƒ— | æ›¸å¼ | ã‚½ãƒ¼ãƒˆ | å›ºå®š | èª¬æ˜ |
|----------|-----------|------|--------|------|------|
| å¹´æœˆ | Text | YYYY-MM | â—‹ | Ã— | è«‹æ±‚å¯¾è±¡æœˆ |
| è«‹æ±‚ID | Link | è«‹æ±‚-XXXXXXXX | â—‹ | â—‹ | è©³ç´°ãƒšãƒ¼ã‚¸ã¸ |
| é‡‘é¡ | Number | Â¥999,999 | â—‹ | Ã— | é€šè²¨æ›¸å¼ |
| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | Tag | è‰²ä»˜ã | â—‹ | Ã— | çŠ¶æ…‹è¡¨ç¤º |
| è«‹æ±‚æ—¥ | Date | YYYY/MM/DD | â—‹ | Ã— | ç™ºè¡Œæ—¥ä»˜ |
| æ“ä½œ | Button | è©³ç´° | Ã— | â—‹ | è©³ç´°è¡¨ç¤º |

### 2.4 ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å€¤è©³ç´°

| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å€¤ | è¡¨ç¤ºå | ã‚¿ã‚°è‰² | èª¬æ˜ |
|--------------|--------|--------|------|
| PENDING | æœªè«‹æ±‚ | æ©™è‰² | è«‹æ±‚æ›¸ãŒä½œæˆã•ã‚ŒãŸãŒæœªé€ä»˜ |
| ISSUED | è«‹æ±‚æ¸ˆ | é’è‰² | è«‹æ±‚æ›¸ãŒç™ºè¡Œæ¸ˆã¿ |
| PAID | æ”¯æ‰•æ¸ˆ | ç·‘è‰² | æ”¯æ‰•ã„å®Œäº† |
| CANCELLED | ã‚­ãƒ£ãƒ³ã‚»ãƒ« | ã‚°ãƒ¬ãƒ¼ | è«‹æ±‚ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚ŒãŸ |

---

## 3. äº¤äº’æµç¨‹

### 3.1 ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰ãƒ•ãƒ­ãƒ¼

| ã‚¹ãƒ†ãƒƒãƒ— | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | ã‚·ã‚¹ãƒ†ãƒ å¿œç­” |
|----------|-----------|--------------|
| 1 | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒp5ãƒšãƒ¼ã‚¸ã¸é·ç§» | ãƒšãƒ¼ã‚¸åˆæœŸåŒ– |
| 2 | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ¤œç´¢æ¡ä»¶è¨­å®š | å¹´æœˆ:å½“æœˆ, ä»–:ç©º |
| 3 | æ¤œç´¢APIè‡ªå‹•å®Ÿè¡Œ | GET /api/v1/partners/billings/search |
| 4 | APIãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡ | ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿è¨­å®š |
| 5 | ãƒ†ãƒ¼ãƒ–ãƒ«æç”» | ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š |
| 6 | ãƒšãƒ¼ã‚¸è¡¨ç¤ºå®Œäº† | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œå¾…æ©Ÿ |

### 3.2 æ¤œç´¢æ“ä½œãƒ•ãƒ­ãƒ¼

| ã‚¹ãƒ†ãƒƒãƒ— | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ | ã‚·ã‚¹ãƒ†ãƒ å¿œç­” |
|----------|-------------|--------------|
| 1 | æ¤œç´¢æ¡ä»¶å…¥åŠ›/é¸æŠ | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
| 2 | æ¤œç´¢ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ | ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºé–‹å§‹ |
| 3 | æ¤œç´¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ§‹ç¯‰ | å¹´æœˆ:YYYY-MM, ID:éƒ¨åˆ†ä¸€è‡´ |
| 4 | APIãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ | GET /api/v1/partners/billings/search |
| 5 | ãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡ | ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿æ›´æ–° |
| 6 | ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æ›´æ–° | åˆè¨ˆä»¶æ•°è¡¨ç¤ºæ›´æ–° |
| 7 | æ¤œç´¢å®Œäº† | ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºçµ‚äº† |

### 3.3 è©³ç´°è¡¨ç¤ºãƒ•ãƒ­ãƒ¼

| ã‚¹ãƒ†ãƒƒãƒ— | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ | ã‚·ã‚¹ãƒ†ãƒ å¿œç­” |
|----------|-------------|--------------|
| 1 | è«‹æ±‚IDãƒªãƒ³ã‚¯ã‚¯ãƒªãƒƒã‚¯ | è©³ç´°ãƒšãƒ¼ã‚¸ã¸é·ç§» |
| 2 | è©³ç´°ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰ | GET /api/v1/partners/billings/{id} |
| 3 | è©³ç´°æƒ…å ±è¡¨ç¤º | è«‹æ±‚è©³ç´°+æ˜ç´°è¡¨ç¤º |
| 4 | æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ | p5ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹ |

### 3.4 ãƒšãƒ¼ã‚¸ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼

| ã‚¹ãƒ†ãƒƒãƒ— | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ | ã‚·ã‚¹ãƒ†ãƒ å¿œç­” |
|----------|-------------|--------------|
| 1 | ãƒšãƒ¼ã‚¸ç•ªå·ã‚¯ãƒªãƒƒã‚¯ | ãƒšãƒ¼ã‚¸ç•ªå·å–å¾— |
| 2 | æ¤œç´¢APIå†å®Ÿè¡Œ | page, pageSizeãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ  |
| 3 | ãƒ†ãƒ¼ãƒ–ãƒ«æ›´æ–° | è©²å½“ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º |
| 4 | ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®èª¿æ•´ | ãƒ†ãƒ¼ãƒ–ãƒ«ä¸Šéƒ¨ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« |

### 3.5 ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ•ãƒ­ãƒ¼

| ã‚¹ãƒ†ãƒƒãƒ— | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ | ã‚·ã‚¹ãƒ†ãƒ å¿œç­” |
|----------|-------------|--------------|
| 1 | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ | å½¢å¼é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º |
| 2 | CSV/Excelé¸æŠ | é¸æŠå½¢å¼ç¢ºèª |
| 3 | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆAPIå®Ÿè¡Œ | POST /api/v1/partners/billings/export |
| 4 | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ | Content-Dispositionãƒ˜ãƒƒãƒ€ãƒ¼å‡¦ç† |
| 5 | ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å®Œäº† | å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º |

---

## 4. ç•Œé¢è§„èŒƒ

### 4.1 ãƒšãƒ¼ã‚¸ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

| å±æ€§ | PCç«¯å€¤ | SPç«¯å€¤ | èª¬æ˜ |
|------|--------|--------|------|
| **ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—** | PC/SPå¯¾å¿œ | ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– | â‰ªPC/SPâ‰«ä¸¡å¯¾å¿œ |
| **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ–¹å¼** | ä¸Šâ†’ä¸‹é…ç½® | å‚ç›´é…ç½® | æ¤œç´¢â†’ãƒ†ãƒ¼ãƒ–ãƒ«â†’ãƒšãƒ¼ã‚¸ãƒ³ã‚° |
| **æ¤œç´¢ã‚¨ãƒªã‚¢** | æ°´å¹³é…ç½® | å‚ç›´é…ç½® | PC:3åˆ—, SP:ç¸¦1åˆ— |

### 4.2 æ¤œç´¢ã‚¨ãƒªã‚¢ä»•æ§˜

| å±æ€§ | å€¤ | èª¬æ˜ |
|------|----|------|
| **ãƒ©ãƒ™ãƒ«å¹…** | 80px | å›ºå®šå¹… |
| **å…¥åŠ›æ¬„å¹…** | 200px | PCç«¯å›ºå®šå¹… |
| **ãƒœã‚¿ãƒ³é–“éš”** | 16px | ãƒœã‚¿ãƒ³é–“ä½™ç™½ |
| **ãƒ•ã‚©ãƒ¼ãƒ ä½™ç™½** | 24px | æ¤œç´¢ã‚¨ãƒªã‚¢ä¸‹éƒ¨ä½™ç™½ |

### 4.3 ãƒ†ãƒ¼ãƒ–ãƒ«ä»•æ§˜

| å±æ€§ | å€¤ | èª¬æ˜ |
|------|----|------|
| **è¡Œé«˜** | 48px | å›ºå®šè¡Œé«˜ |
| **ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º** | 14px | æ¨™æº–ãƒ†ã‚­ã‚¹ãƒˆ |
| **ç¸æ¨¡æ§˜** | æœ‰ã‚Š | å¶æ•°è¡ŒèƒŒæ™¯#fafafa |
| **ãƒ›ãƒãƒ¼åŠ¹æœ** | æœ‰ã‚Š | è¡Œãƒ›ãƒãƒ¼èƒŒæ™¯#f5f5f5 |
| **ãƒœãƒ¼ãƒ€ãƒ¼** | 1px #e8e8e8 | ã‚»ãƒ«å¢ƒç•Œç·š |
| **ãƒ˜ãƒƒãƒ€ãƒ¼å›ºå®š** | æœ‰ã‚Š | ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ãƒ˜ãƒƒãƒ€ãƒ¼å›ºå®š |

### 4.4 ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¿ã‚°ä»•æ§˜

| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | èƒŒæ™¯è‰² | æ–‡å­—è‰² | ãƒœãƒ¼ãƒ€ãƒ¼ |
|-----------|--------|--------|--------|
| æœªè«‹æ±‚ | #fa8c16 | #ffffff | ãªã— |
| è«‹æ±‚æ¸ˆ | #1890ff | #ffffff | ãªã— |
| æ”¯æ‰•æ¸ˆ | #52c41a | #ffffff | ãªã— |
| ã‚­ãƒ£ãƒ³ã‚»ãƒ« | #d9d9d9 | #000000 | ãªã— |

### 4.5 ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ä»•æ§˜

| å±æ€§ | å€¤ | èª¬æ˜ |
|------|----|------|
| **ãƒšãƒ¼ã‚¸ã‚µã‚¤ã‚º** | 10/20/50/100 | é¸æŠå¯èƒ½ |
| **è¡¨ç¤ºä½ç½®** | å³ä¸‹ | ãƒ†ãƒ¼ãƒ–ãƒ«ä¸‹ä¸­å¤® |
| **ç·ä»¶æ•°è¡¨ç¤º** | æœ‰ã‚Š | "1-20 / 100ä»¶" å½¢å¼ |

---

## 5. APIæ¥å£è®¾è®¡

### 5.1 è«‹æ±‚æ¤œç´¢API

```typescript
// GET /api/v1/partners/billings/search
interface SearchBillingRequest {
  yearMonth?: string;          // YYYY-MMæ ¼å¼
  billingId?: string;          // éƒ¨åˆ†åŒ¹é…
  status?: BillingStatus;      // çŠ¶æ€ç­›é€‰
  page?: number;               // é¡µç ï¼Œä»1å¼€å§‹
  pageSize?: number;           // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20
  sort?: string;               // æ’åºå­—æ®µ
  sortOrder?: 'asc' | 'desc';  // æ’åºæ–¹å‘
}

interface SearchBillingResponse {
  success: boolean;
  data: {
    billings: BillingItem[];
    pagination: {
      currentPage: number;
      pageSize: number;
      totalItems: number;
      totalPages: number;
    };
    summary: {
      totalCount: number;       // æ€»è®°å½•æ•°
      totalAmount: number;      // æ€»é‡‘é¢
      pendingCount: number;     // æœªè«‹æ±‚æ•°é‡
      issuedCount: number;      // è«‹æ±‚æ¸ˆæ•°é‡
      paidCount: number;        // æ”¯æ‰•æ¸ˆæ•°é‡
    };
  };
  error?: {
    code: string;
    message: string;
    details?: Record<string, unknown>;
  };
}

type BillingStatus = 'PENDING' | 'ISSUED' | 'PAID' | 'CANCELLED';

interface BillingItem {
  billingId: string;           // è«‹æ±‚ID
  billingYearMonth: string;    // è«‹æ±‚å¹´æœˆ YYYY-MM
  amount: number;              // é‡‘é¡
  status: BillingStatus;       // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  issueDate: string;           // è«‹æ±‚æ—¥ YYYY-MM-DD
  dueDate?: string;            // æ”¯æ‰•æœŸé™
  partnerId: string;           // ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ID
  createdAt: string;           // ä½œæˆæ—¥æ™‚
}
```

### 5.2 è«‹æ±‚è©³ç´°API

```typescript
// GET /api/v1/partners/billings/{billingId}
interface GetBillingDetailResponse {
  success: boolean;
  data: {
    billingId: string;
    billingYearMonth: string;
    amount: number;
    status: BillingStatus;
    issueDate: string;
    dueDate?: string;
    paidDate?: string;
    partnerId: string;
    partnerName: string;
    baseName: string;
    details: BillingDetail[];
    attachments?: Attachment[];
    createdAt: string;
    updatedAt: string;
  };
}

interface BillingDetail {
  detailId: string;
  lineCode: string;            // ç·šä¾¿ã‚³ãƒ¼ãƒ‰
  lineName: string;            // ç·šä¾¿å
  dailyRate: number;           // æ—¥åˆ¥å‚­è»Šè²»
  days: number;                // æ—¥æ•°
  amount: number;              // é‡‘é¡ï¼ˆdailyRate Ã— daysï¼‰
  description?: string;        // èª¬æ˜
}

interface Attachment {
  fileId: string;
  fileName: string;
  fileType: string;
  fileSize: number;
  uploadedAt: string;
}
```

### 5.3 ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆAPI

```typescript
// POST /api/v1/partners/billings/export
interface ExportBillingRequest {
  searchConditions: SearchBillingRequest;
  format: 'csv' | 'excel';        // å¯¼å‡ºæ ¼å¼
  includeDetails?: boolean;       // æ˜¯å¦åŒ…å«æ˜ç»†
  language?: 'ja' | 'zh' | 'en';  // å¯¼å‡ºè¯­è¨€
}

interface ExportBillingResponse {
  success: boolean;
  data: {
    exportId: string;
    fileName: string;
    fileSize: number;
    downloadUrl: string;
    expiresAt: string;           // ä¸‹è½½é“¾æ¥æœ‰æ•ˆæœŸ
  };
  message: string;
}
```

### 5.4 APIã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹

```typescript
interface ApiErrorResponse {
  success: false;
  error: {
    code: ErrorCode;
    message: string;
    details?: Record<string, unknown>;
  };
}

type ErrorCode =
  | 'INVALID_PARAMETER'
  | 'PARTNER_NOT_FOUND'
  | 'BILLING_NOT_FOUND'
  | 'PERMISSION_DENIED'
  | 'EXPORT_FAILED'
  | 'RATE_LIMIT_EXCEEDED'
  | 'INTERNAL_ERROR';
```

---

## 6. å‰ç«¯å®ç°

### 6.1 ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```typescript
// BillingSearchPage.tsx
import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import {
  Form,
  DatePicker,
  Input,
  Select,
  Button,
  Table,
  Tag,
  Pagination,
  Space,
  message,
  Card,
  Statistic,
} from 'antd';
import { SearchOutlined, ExportOutlined, EyeOutlined } from '@ant-design/icons';
import dayjs from 'dayjs';
import { BillingItem, SearchBillingRequest } from '../../types/billing';
import { searchBillings, exportBillings } from '../../api/billing';
import { StatusTag } from '../../components/StatusTag';
import styles from './BillingSearchPage.module.css';

const { RangePicker } = DatePicker;

export const BillingSearchPage: React.FC = () => {
  const [form] = Form.useForm();
  const navigate = useNavigate();
  const [data, setData] = useState<BillingItem[]>([]);
  const [loading, setLoading] = useState(false);
  const [exporting, setExporting] = useState(false);
  const [pagination, setPagination] = useState({
    current: 1,
    pageSize: 20,
    total: 0,
  });
  const [summary, setSummary] = useState({
    totalAmount: 0,
    totalCount: 0,
  });

  // åˆ—å®šä¹‰
  const columns = [
    {
      title: 'å¹´æœˆ',
      dataIndex: 'billingYearMonth',
      key: 'billingYearMonth',
      width: 100,
      sorter: true,
      render: (text: string) => (
        <span className={styles.yearMonth}>{text}</span>
      ),
    },
    {
      title: 'è«‹æ±‚ID',
      dataIndex: 'billingId',
      key: 'billingId',
      width: 180,
      sorter: true,
      render: (text: string, record: BillingItem) => (
        <Button
          type="link"
          onClick={() => handleViewDetail(record.billingId)}
          className={styles.billingIdLink}
        >
          {text}
        </Button>
      ),
    },
    {
      title: 'é‡‘é¡',
      dataIndex: 'amount',
      key: 'amount',
      width: 120,
      sorter: true,
      align: 'right' as const,
      render: (amount: number) => (
        <span className={styles.amount}>
          Â¥{amount.toLocaleString('ja-JP')}
        </span>
      ),
    },
    {
      title: 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹',
      dataIndex: 'status',
      key: 'status',
      width: 100,
      sorter: true,
      render: (status: string) => <StatusTag status={status} />,
    },
    {
      title: 'è«‹æ±‚æ—¥',
      dataIndex: 'issueDate',
      key: 'issueDate',
      width: 120,
      sorter: true,
      render: (date: string) => dayjs(date).format('YYYY/MM/DD'),
    },
    {
      title: 'æ“ä½œ',
      key: 'action',
      width: 100,
      fixed: 'right' as const,
      render: (_: any, record: BillingItem) => (
        <Button
          type="text"
          icon={<EyeOutlined />}
          onClick={() => handleViewDetail(record.billingId)}
          size="small"
        >
          è©³ç´°
        </Button>
      ),
    },
  ];

  // åˆå§‹æœç´¢
  useEffect(() => {
    handleSearch({ yearMonth: dayjs().format('YYYY-MM') });
  }, []);

  // æœç´¢å¤„ç†
  const handleSearch = async (values: any) => {
    setLoading(true);
    try {
      const searchParams: SearchBillingRequest = {
        ...values,
        page: pagination.current,
        pageSize: pagination.pageSize,
      };

      const response = await searchBillings(searchParams);
      if (response.success) {
        setData(response.data.billings);
        setPagination(prev => ({
          ...prev,
          total: response.data.pagination.totalItems,
        }));
        setSummary({
          totalAmount: response.data.summary.totalAmount,
          totalCount: response.data.summary.totalCount,
        });
      } else {
        message.error(response.error?.message || 'æ¤œç´¢ã«å¤±æ•—ã—ã¾ã—ãŸ');
      }
    } catch (error) {
      message.error('ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
      console.error('Search error:', error);
    } finally {
      setLoading(false);
    }
  };

  // é¡µé¢å˜åŒ–å¤„ç†
  const handlePageChange = (page: number, pageSize?: number) => {
    setPagination(prev => ({
      ...prev,
      current: page,
      pageSize: pageSize || prev.pageSize,
    }));
    
    // é‡æ–°æœç´¢
    form.validateFields().then(values => {
      handleSearch({
        ...values,
        page,
        pageSize: pageSize || pagination.pageSize,
      });
    });
  };

  // æŸ¥çœ‹è¯¦æƒ…
  const handleViewDetail = (billingId: string) => {
    navigate(`/p5/detail/${billingId}`);
  };

  // å¯¼å‡ºå¤„ç†
  const handleExport = async () => {
    setExporting(true);
    try {
      const values = await form.validateFields();
      const searchParams: SearchBillingRequest = {
        ...values,
        page: 1,
        pageSize: 10000, // å¯¼å‡ºæ‰€æœ‰æ•°æ®
      };

      const response = await exportBillings({
        searchConditions: searchParams,
        format: 'excel',
        includeDetails: true,
      });

      if (response.success) {
        // ä¸‹è½½æ–‡ä»¶
        const link = document.createElement('a');
        link.href = response.data.downloadUrl;
        link.download = response.data.fileName;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);

        message.success('ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸ');
      } else {
        message.error(response.error?.message || 'ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ');
      }
    } catch (error) {
      message.error('ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
      console.error('Export error:', error);
    } finally {
      setExporting(false);
    }
  };

  // é‡ç½®æœç´¢
  const handleReset = () => {
    form.resetFields();
    setPagination({
      current: 1,
      pageSize: 20,
      total: 0,
    });
    setData([]);
    setSummary({ totalAmount: 0, totalCount: 0 });
  };

  return (
    <div className={styles.container}>
      <Card title="è«‹æ±‚æ¤œç´¢" className={styles.searchCard}>
        <Form
          form={form}
          layout="inline"
          onFinish={handleSearch}
          initialValues={{
            yearMonth: dayjs().format('YYYY-MM'),
          }}
        >
          <Form.Item
            name="yearMonth"
            label="å¹´æœˆ"
            className={styles.formItem}
          >
            <DatePicker
              picker="month"
              format="YYYY-MM"
              allowClear={false}
              className={styles.datePicker}
            />
          </Form.Item>

          <Form.Item
            name="billingId"
            label="è«‹æ±‚ID"
            className={styles.formItem}
          >
            <Input
              placeholder="è«‹æ±‚IDã‚’å…¥åŠ›"
              allowClear
              maxLength={50}
              className={styles.input}
            />
          </Form.Item>

          <Form.Item
            name="status"
            label="ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹"
            className={styles.formItem}
          >
            <Select
              placeholder="ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’é¸æŠ"
              allowClear
              style={{ width: 120 }}
              options={[
                { value: 'PENDING', label: 'æœªè«‹æ±‚' },
                { value: 'ISSUED', label: 'è«‹æ±‚æ¸ˆ' },
                { value: 'PAID', label: 'æ”¯æ‰•æ¸ˆ' },
                { value: 'CANCELLED', label: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«' },
              ]}
            />
          </Form.Item>

          <Form.Item className={styles.formItem}>
            <Space>
              <Button
                type="primary"
                htmlType="submit"
                icon={<SearchOutlined />}
                loading={loading}
              >
                æ¤œç´¢
              </Button>
              <Button onClick={handleReset}>
                ãƒªã‚»ãƒƒãƒˆ
              </Button>
              <Button
                icon={<ExportOutlined />}
                onClick={handleExport}
                loading={exporting}
              >
                ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
              </Button>
            </Space>
          </Form.Item>
        </Form>
      </Card>

      {summary.totalCount > 0 && (
        <div className={styles.summary}>
          <Statistic
            title="åˆè¨ˆä»¶æ•°"
            value={summary.totalCount}
            suffix="ä»¶"
          />
          <Statistic
            title="åˆè¨ˆé‡‘é¡"
            value={summary.totalAmount}
            prefix="Â¥"
            valueStyle={{ color: '#3f8600' }}
          />
        </div>
      )}

      <Card className={styles.resultCard}>
        <Table
          columns={columns}
          dataSource={data}
          rowKey="billingId"
          loading={loading}
          pagination={false}
          scroll={{ x: 800 }}
          locale={{
            emptyText: 'æ¤œç´¢æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹è«‹æ±‚ãŒã‚ã‚Šã¾ã›ã‚“',
          }}
        />

        {pagination.total > 0 && (
          <div className={styles.pagination}>
            <Pagination
              current={pagination.current}
              pageSize={pagination.pageSize}
              total={pagination.total}
              onChange={handlePageChange}
              onShowSizeChange={handlePageChange}
              showSizeChanger
              showQuickJumper
              showTotal={(total, range) => (
                `${range[0]}-${range[1]} / ${total}ä»¶`
              )}
              pageSizeOptions={['10', '20', '50', '100']}
            />
          </div>
        )}
      </Card>
    </div>
  );
};
```

### 6.2 ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¿ã‚°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```typescript
// StatusTag.tsx
import React from 'react';
import { Tag } from 'antd';
import { BillingStatus } from '../../types/billing';

interface StatusTagProps {
  status: BillingStatus;
  size?: 'default' | 'small';
}

export const StatusTag: React.FC<StatusTagProps> = ({ status, size = 'default' }) => {
  const statusConfig = {
    PENDING: {
      color: 'orange',
      text: 'æœªè«‹æ±‚',
      description: 'è«‹æ±‚æ›¸ãŒä½œæˆã•ã‚ŒãŸãŒæœªé€ä»˜',
    },
    ISSUED: {
      color: 'blue',
      text: 'è«‹æ±‚æ¸ˆ',
      description: 'è«‹æ±‚æ›¸ãŒç™ºè¡Œæ¸ˆã¿',
    },
    PAID: {
      color: 'green',
      text: 'æ”¯æ‰•æ¸ˆ',
      description: 'æ”¯æ‰•ã„å®Œäº†',
    },
    CANCELLED: {
      color: 'default',
      text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
      description: 'è«‹æ±‚ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚ŒãŸ',
    },
  };

  const config = statusConfig[status] || {
    color: 'default',
    text: status,
    description: '',
  };

  return (
    <Tag
      color={config.color}
      style={{
        fontSize: size === 'small' ? '12px' : '14px',
        padding: size === 'small' ? '2px 8px' : '4px 12px',
        borderRadius: '4px',
      }}
      title={config.description}
    >
      {config.text}
    </Tag>
  );
};
```

### 6.3 APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

```typescript
// billingApi.ts
import axios, { AxiosRequestConfig } from 'axios';
import {
  SearchBillingRequest,
  SearchBillingResponse,
  ExportBillingRequest,
  ExportBillingResponse,
  GetBillingDetailResponse,
} from '../types/billing';

const API_BASE_URL = '/api/v1';

const apiClient = axios.create({
  baseURL: API_BASE_URL,
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json',
  },
});

// è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆæ·»åŠ tokenï¼‰
apiClient.interceptors.request.use((config) => {
  const token = localStorage.getItem('auth_token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  config.headers['X-CSRF-Token'] = getCsrfToken();
  return config;
});

// å“åº”æ‹¦æˆªå™¨ï¼ˆé”™è¯¯å¤„ç†ï¼‰
apiClient.interceptors.response.use(
  (response) => response.data,
  (error) => {
    if (error.response?.status === 401) {
      // è®¤è¯å¤±è´¥ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
      window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);

export const searchBillings = async (
  params: SearchBillingRequest
): Promise<SearchBillingResponse> => {
  const queryString = new URLSearchParams();
  
  if (params.yearMonth) queryString.append('yearMonth', params.yearMonth);
  if (params.billingId) queryString.append('billingId', params.billingId);
  if (params.status) queryString.append('status', params.status);
  if (params.page) queryString.append('page', params.page.toString());
  if (params.pageSize) queryString.append('pageSize', params.pageSize.toString());
  if (params.sort) queryString.append('sort', params.sort);
  if (params.sortOrder) queryString.append('sortOrder', params.sortOrder);

  return apiClient.get(`/partners/billings/search?${queryString.toString()}`);
};

export const getBillingDetail = async (
  billingId: string
): Promise<GetBillingDetailResponse> => {
  return apiClient.get(`/partners/billings/${billingId}`);
};

export const exportBillings = async (
  request: ExportBillingRequest
): Promise<ExportBillingResponse> => {
  return apiClient.post('/partners/billings/export', request);
};

// CSRF Tokenè·å–
const getCsrfToken = () => {
  const metaTag = document.querySelector('meta[name="csrf-token"]');
  return metaTag ? metaTag.getAttribute('content') : '';
};
```

---

## 7. åç«¯æœåŠ¡è®¾è®¡

### 7.1 Controller

```java
@RestController
@RequestMapping("/api/v1/partners/billings")
@RequiredArgsConstructor
@Validated
public class PartnerBillingController {

    private final PartnerBillingService billingService;
    private final BillingExportService exportService;

    @GetMapping("/search")
    @ResponseStatus(HttpStatus.OK)
    public ResponseEntity<SearchBillingResponse> searchBillings(
            @Valid @ModelAttribute SearchBillingRequest request,
            @AuthenticationPrincipal User user) {
        SearchBillingResponse response = billingService.searchBillings(
            request, user.getPartnerId());
        return ResponseEntity.ok(response);
    }

    @GetMapping("/{billingId}")
    @ResponseStatus(HttpStatus.OK)
    public ResponseEntity<GetBillingDetailResponse> getBillingDetail(
            @PathVariable @NotBlank String billingId,
            @AuthenticationPrincipal User user) {
        GetBillingDetailResponse response = billingService.getBillingDetail(
            billingId, user.getPartnerId());
        return ResponseEntity.ok(response);
    }

    @PostMapping("/export")
    @ResponseStatus(HttpStatus.OK)
    public ResponseEntity<Resource> exportBillings(
            @Valid @RequestBody ExportBillingRequest request,
            @AuthenticationPrincipal User user) throws IOException {
        ExportResult exportResult = exportService.exportBillings(
            request, user.getPartnerId());

        ByteArrayResource resource = new ByteArrayResource(exportResult.getData());

        return ResponseEntity.ok()
            .contentType(MediaType.parseMediaType(exportResult.getContentType()))
            .header(HttpHeaders.CONTENT_DISPOSITION,
                    "attachment; filename=\"" + exportResult.getFileName() + "\"")
            .body(resource);
    }

    @ExceptionHandler(ValidationException.class)
    public ResponseEntity<ApiErrorResponse> handleValidationException(
            ValidationException ex) {
        return ResponseEntity.badRequest()
            .body(ApiErrorResponse.builder()
                .success(false)
                .error(ApiError.builder()
                    .code("INVALID_PARAMETER")
                    .message(ex.getMessage())
                    .build())
                .build());
    }

    @ExceptionHandler(PermissionDeniedException.class)
    public ResponseEntity<ApiErrorResponse> handlePermissionDeniedException(
            PermissionDeniedException ex) {
        return ResponseEntity.status(HttpStatus.FORBIDDEN)
            .body(ApiErrorResponse.builder()
                .success(false)
                .error(ApiError.builder()
                    .code("PERMISSION_DENIED")
                    .message(ex.getMessage())
                    .build())
                .build());
    }
}
```

### 7.2 Service

```java
@Service
@RequiredArgsConstructor
@Slf4j
public class PartnerBillingService {

    private final BillingRepository billingRepository;
    private final BillingDetailRepository detailRepository;
    private final PartnerRepository partnerRepository;

    @Transactional(readOnly = true)
    public SearchBillingResponse searchBillings(
            SearchBillingRequest request, String partnerId) {
        // éªŒè¯åˆä½œä¼™ä¼´å­˜åœ¨æ€§
        Partner partner = partnerRepository.findById(partnerId)
            .orElseThrow(() -> new PartnerNotFoundException(partnerId));

        // æ„å»ºæŸ¥è¯¢æ¡ä»¶
        Specification<Billing> spec = Specification.where(
            BillingSpecification.hasPartnerId(partnerId));

        if (StringUtils.hasText(request.getYearMonth())) {
            spec = spec.and(BillingSpecification.hasYearMonth(
                request.getYearMonth()));
        }

        if (StringUtils.hasText(request.getBillingId())) {
            spec = spec.and(BillingSpecification.billingIdContains(
                request.getBillingId()));
        }

        if (request.getStatus() != null) {
            spec = spec.and(BillingSpecification.hasStatus(
                request.getStatus()));
        }

        // åˆ†é¡µæŸ¥è¯¢
        Pageable pageable = PageRequest.of(
            request.getPage() != null ? request.getPage() - 1 : 0,
            request.getPageSize() != null ? request.getPageSize() : 20,
            buildSort(request.getSort(), request.getSortOrder()));

        Page<Billing> billingPage = billingRepository.findAll(spec, pageable);

        // ç»Ÿè®¡æ•°æ®
        List<Billing> allBillings = billingRepository.findAll(spec);
        BillingSummary summary = calculateSummary(allBillings);

        // è½¬æ¢ä¸ºDTO
        List<BillingDTO> billingDTOs = billingPage.getContent().stream()
            .map(BillingDTO::from)
            .collect(Collectors.toList());

        return SearchBillingResponse.builder()
            .success(true)
            .data(SearchBillingData.builder()
                .billings(billingDTOs)
                .pagination(PaginationInfo.builder()
                    .currentPage(billingPage.getNumber() + 1)
                    .pageSize(billingPage.getSize())
                    .totalItems(billingPage.getTotalElements())
                    .totalPages(billingPage.getTotalPages())
                    .build())
                .summary(summary)
                .build())
            .build();
    }

    @Transactional(readOnly = true)
    public GetBillingDetailResponse getBillingDetail(
            String billingId, String partnerId) {
        Billing billing = billingRepository.findById(billingId)
            .orElseThrow(() -> new BillingNotFoundException(billingId));

        // éªŒè¯æƒé™
        validateBillingOwnership(billing, partnerId);

        // è·å–æ˜ç»†
        List<BillingDetail> details = detailRepository.findByBillingId(billingId);

        // è·å–åˆä½œä¼™ä¼´ä¿¡æ¯
        Partner partner = partnerRepository.findById(partnerId)
            .orElseThrow(() -> new PartnerNotFoundException(partnerId));

        return GetBillingDetailResponse.builder()
            .success(true)
            .data(BillingDetailDTO.from(billing, details, partner))
            .build();
    }

    private BillingSummary calculateSummary(List<Billing> billings) {
        long pendingCount = billings.stream()
            .filter(b -> b.getStatus() == BillingStatus.PENDING)
            .count();
        long issuedCount = billings.stream()
            .filter(b -> b.getStatus() == BillingStatus.ISSUED)
            .count();
        long paidCount = billings.stream()
            .filter(b -> b.getStatus() == BillingStatus.PAID)
            .count();

        BigDecimal totalAmount = billings.stream()
            .map(Billing::getAmount)
            .reduce(BigDecimal.ZERO, BigDecimal::add);

        return BillingSummary.builder()
            .totalCount(billings.size())
            .totalAmount(totalAmount)
            .pendingCount(pendingCount)
            .issuedCount(issuedCount)
            .paidCount(paidCount)
            .build();
    }

    private Sort buildSort(String sortField, String sortOrder) {
        if (sortField == null) {
            return Sort.by(Sort.Order.desc("issueDate"));
        }

        Sort.Direction direction = "desc".equalsIgnoreCase(sortOrder)
            ? Sort.Direction.DESC : Sort.Direction.ASC;

        return Sort.by(new Sort.Order(direction, sortField));
    }

    private void validateBillingOwnership(Billing billing, String partnerId) {
        if (!billing.getPartnerId().equals(partnerId)) {
            log.warn("ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼{}ãŒè«‹æ±‚{}ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è©¦ã¿ã¾ã—ãŸãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸ",
                partnerId, billing.getId());
            throw new PermissionDeniedException(
                "ã“ã®è«‹æ±‚ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“");
        }
    }
}
```

---

## 8. ç”»é¢-API-æ•°æ®åº“å…³ç³»æ˜ å°„è¡¨

### 8.1 å…³ç³»æ€»è§ˆè¡¨

| ç”»é¢å…ƒç´  | APIæ¥å£ | æ¥å£åŠŸèƒ½è¯´æ˜ | ç›¸å…³æ•°æ®åº“è¡¨ | å­—æ®µå…³ç³» |
|----------|---------|--------------|--------------|----------|
| å¹´æœˆé¸æŠ | GET /api/v1/partners/billings/search | æœç´¢è´¦å•ï¼ˆå¹´æœˆï¼‰ | m_billings | billing_year_month = yearMonth |
| ä¼šç¤¾ã‚³ãƒ¼ãƒ‰å…¥åŠ› | GET /api/v1/partners/billings/search | æœç´¢è´¦å•ï¼ˆå…¬å¸ä»£ç ï¼‰ | m_billings | partner_company_code LIKE %code% |
| ä¾é ¼ãƒ™ãƒ¼ã‚¹é¸æŠ | GET /api/v1/partners/billings/search | æœç´¢è´¦å•ï¼ˆãƒ™ãƒ¼ã‚¹ï¼‰ | m_billings | base_id = baseId |
| ä¾é ¼ãƒ™ãƒ¼ã‚¹é¸æŠ | GET /api/v1/bases | è·å–ãƒ™ãƒ¼ã‚¹åˆ—è¡¨ | m_bases | å­—æ®µç›´æ¥æ˜ å°„ |
| ã‚¹ãƒ†ãƒ¼ã‚¿ì„ íƒ | GET /api/v1/partners/billings/search | æœç´¢è´¦å•ï¼ˆçŠ¶æ€ï¼‰ | m_billings | status IN (status[]) |
| æ¤œç´¢ãƒœã‚¿ãƒ³ | GET /api/v1/partners/billings/search | æ‰§è¡Œæœç´¢ | m_billings | å­—æ®µç›´æ¥æ˜ å°„ |
| æ¤œç´¢çµæœãƒ†ãƒ¼ãƒ–ãƒ« | GET /api/v1/partners/billings/search | è·å–è´¦å•åˆ—è¡¨ | m_billings | å­—æ®µç›´æ¥æ˜ å°„ |
| å¯¾è±¡å¹´æœˆåˆ— | GET /api/v1/partners/billings/search | æ˜¾ç¤ºå¹´æœˆ | m_billings | billing_year_month â†’ yearMonth |
| ä¾é ¼ãƒ™ãƒ¼ã‚¹åˆ— | GET /api/v1/partners/billings/search | æ˜¾ç¤ºãƒ™ãƒ¼ã‚¹å | m_billings | base_name â†’ baseName |
| ä¾é ¼ãƒ™ãƒ¼ã‚¹ãƒªãƒ³ã‚¯ | GET /api/v1/partners/billings/{id} | è·³è½¬è¯¦æƒ… | m_billings | id â†’ billingId |
| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ— | GET /api/v1/partners/billings/search | æ˜¾ç¤ºçŠ¶æ€ | m_billings | status â†’ status |
| æ›´æ–°æ—¥æ™‚åˆ— | GET /api/v1/partners/billings/search | æ˜¾ç¤ºæ›´æ–°æ—¶é—´ | m_billings | updated_at â†’ updatedAt |
| æ›´æ–°è€…åˆ— | GET /api/v1/partners/billings/search | æ˜¾ç¤ºæ›´æ–°è€… | m_billings | updated_by â†’ updatedBy |
| è«‹æ±‚æ›¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ | GET /api/v1/partners/billings/upload | è¿å¾€ä¸Šä¼ é¡µé¢ | - | ãƒšãƒ¼ã‚¸é·ç§» |
| ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³ | POST /api/v1/partners/billings/export | å¯¼å‡ºæ•°æ® | CSV/Excelç”Ÿæˆ | ãªã— |

### 8.2 å…³ç³»è¯´æ˜

**é¡µé¢åŠ è½½æµç¨‹**ï¼š
1. ç”¨æˆ·è®¿é—®p5é¡µé¢
2. é¡µé¢åˆå§‹åŒ–ï¼Œè®¾ç½®é»˜è®¤æœç´¢æ¡ä»¶
3. è‡ªåŠ¨æ‰§è¡Œé»˜è®¤æœç´¢ GET /api/v1/partners/billings/search
4. APIä»m_billingsè·å–è´¦å•æ•°æ®
5. è¿”å›åˆ†é¡µç»“æœå’Œç»Ÿè®¡ä¿¡æ¯
6. è¡¨æ ¼æ¸²æŸ“æœç´¢ç»“æœ

**æœç´¢æ‰§è¡Œæµç¨‹**ï¼š
1. ç”¨æˆ·è¾“å…¥æœç´¢æ¡ä»¶ï¼ˆå¹´æœˆ/ä¼šç¤¾ã‚³ãƒ¼ãƒ‰/ä¾é ¼ãƒ™ãƒ¼ã‚¹/ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼‰
2. ç‚¹å‡»æ¤œç´¢æŒ‰é’®
3. æ„å»ºæŸ¥è¯¢å‚æ•°
4. è°ƒç”¨æœç´¢API
5. åç«¯åœ¨m_billingsä¸Šæ‰§è¡Œå¸¦æ¡ä»¶çš„åˆ†é¡µæŸ¥è¯¢
6. è¿”å›ç¬¦åˆæ¡ä»¶çš„ç»“æœ

**è¯¦æƒ…è·³è½¬æµç¨‹**ï¼š
1. ç”¨æˆ·ç‚¹å‡»ãƒ™ãƒ¼ã‚¹åãƒªãƒ³ã‚¯
2. è·³è½¬åˆ°p6-è«‹æ±‚æ›¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰é¡µé¢
3. URLå‚æ•°ä¼ é€’billingId
4. è¯¦æƒ…é¡µé¢åŠ è½½å¯¹åº”è´¦å•ä¿¡æ¯

**æ•°æ®è¡¨å…³ç³»ï¼ˆERå›¾ï¼‰**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      m_billings                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK: id                                                       â”‚
â”‚ FK: partner_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º m_partner_companies   â”‚
â”‚ FK: base_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º m_bases                 â”‚
â”‚    billing_id                                              â”‚
â”‚    billing_year_month                                      â”‚
â”‚    amount                                                  â”‚
â”‚    status                                                  â”‚
â”‚    issue_date                                              â”‚
â”‚    due_date                                                â”‚
â”‚    paid_date                                               â”‚
â”‚    base_name                                               â”‚
â”‚    memo                                                    â”‚
â”‚    created_by                                              â”‚
â”‚    created_at                                              â”‚
â”‚    updated_by                                              â”‚
â”‚    updated_at                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ 1:N
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   m_billing_details                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK: id                                                       â”‚
â”‚ FK: billing_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º m_billings             â”‚
â”‚    line_code                                                â”‚
â”‚    line_name                                                â”‚
â”‚    daily_rate                                              â”‚
â”‚    days                                                    â”‚
â”‚    amount                                                  â”‚
â”‚    description                                              â”‚
â”‚    sort_order                                              â”‚
â”‚    created_at                                               â”‚
â”‚    updated_at                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ 1:N
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                m_billing_attachments                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK: id                                                       â”‚
â”‚ FK: billing_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º m_billings             â”‚
â”‚    file_name                                                â”‚
â”‚    file_type                                                â”‚
â”‚    file_size                                                â”‚
â”‚    file_path                                                â”‚
â”‚    uploaded_by                                               â”‚
â”‚    uploaded_at                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å­—æ®µæ˜ å°„é€»è¾‘**ï¼š
- m_billings.billing_year_month (VARCHAR(7)) â†” API yearMonth (YYYY-MMæ ¼å¼)
- m_billings.status (ENUM) â†” API status ('PENDING'|'ISSUED'|'PAID'|'CANCELLED')
- m_billings.amount (DECIMAL) â†” API amount (é‡‘é¢)
- m_billings.issue_date (DATE) â†” API issueDate (è«‹æ±‚æ—¥)
- m_billings.updated_at (TIMESTAMP) â†” API updatedAt (æ›´æ–°æ—¥æ™‚)

### 8.3 æ•°æ®æµå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ç”¨æˆ·æ“ä½œå±‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚æ¡ä»¶å…¥åŠ›   â”‚    â”‚æ¤œç´¢ï¾ï¾ï¾€ï¾  â”‚    â”‚ï¾ï¾ï½°ï½½é¸æŠ  â”‚    â”‚ï¾ï¾ï½°ï½½ï¾—ï¾ï½¸  â”‚          â”‚
â”‚  â”‚ Form    â”‚    â”‚ Button   â”‚    â”‚ Link    â”‚    â”‚ Button   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚              â”‚
        â”‚ GET          â”‚ GET          â”‚ GET          â”‚ POST
        â–¼              â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           React Frontend                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      BillingSearchPage.tsx                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚SearchForm  â”‚  â”‚ResultTable  â”‚  â”‚  Pagination Component     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚(æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ )â”‚  â”‚(çµæœãƒ†ãƒ¼ãƒ–ãƒ«)â”‚  â”‚  (ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³)       â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚
        â”‚ GET          â”‚ GET          â”‚ POST
        â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         REST API Layer                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  GET /api/v1/partners/billings/search                               â”‚   â”‚
â”‚  â”‚  GET /api/v1/bases                                                  â”‚   â”‚
â”‚  â”‚  POST /api/v1/partners/billings/export                              â”‚   â”‚
â”‚  â”‚  GET /api/v1/partners/billings/{id}                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚
        â”‚ SQL SELECT   â”‚ SQL SELECT   â”‚ SQL SELECT
        â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Database Layer (PostgreSQL)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚       m_billings                         â”‚  â”‚       m_bases           â”‚  â”‚
â”‚  â”‚       (è«‹æ±‚ãƒ†ãƒ¼ãƒ–ãƒ«)                    â”‚  â”‚       (ãƒ³ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«)â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â–²                                      â”‚                          â”‚
â”‚         â”‚ FK                                   â”‚ FK                        â”‚
â”‚         â”‚                                      â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚  â”‚       m_billing_details                  â”‚                             â”‚
â”‚  â”‚       (è«‹æ±‚æ˜ç»†ãƒ†ãƒ¼ãƒ–ãƒ«)                 â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚         â–²                                      â”‚                            â”‚
â”‚         â”‚ FK                                   â”‚                            â”‚
â”‚         â–¼                                      â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”‚     m_billing_attachments                 â”‚                              â”‚
â”‚  â”‚     (è«‹æ±‚æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«)           â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.4 æ ¸å¿ƒæ•°æ®åº“è¡¨ç»“æ„

**m_billingsï¼ˆè«‹æ±‚ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰**

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|--------------|----------|------|------------|------|
| id | VARCHAR(50) | PK, NOT NULL | - | ID |
| billing_id | VARCHAR(50) | UNIQUE, NOT NULL | - | è«‹æ±‚ID |
| billing_year_month | VARCHAR(7) | NOT NULL | - | è«‹æ±‚å¹´æœˆï¼ˆYYYY-MMï¼‰ |
| amount | DECIMAL(12,2) | NOT NULL | - | è«‹æ±‚é‡‘é¡ |
| status | ENUM | NOT NULL | 'PENDING' | è«‹æ±‚çŠ¶æ…‹ |
| issue_date | DATE | NOT NULL | - | è«‹æ±‚æ—¥ |
| due_date | DATE | NULL | - | æ”¯æ‰•æœŸé™ |
| paid_date | DATE | NULL | - | æ”¯æ‰•æ—¥ |
| partner_id | VARCHAR(50) | FK â†’ m_partner_companies, NOT NULL | - | ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ID |
| base_id | VARCHAR(50) | FK â†’ m_bases, NOT NULL | - | ãƒ™ãƒ¼ã‚¹ID |
| base_name | VARCHAR(200) | NOT NULL | - | ãƒ™ãƒ¼ã‚¹å |
| memo | TEXT | NULL | - | å‚™è€ƒ |
| created_by | VARCHAR(100) | NULL | - | ä½œæˆè€… |
| created_at | TIMESTAMP | NOT NULL | CURRENT_TIMESTAMP | ä½œæˆæ—¥æ™‚ |
| updated_by | VARCHAR(100) | NULL | - | æ›´æ–°è€… |
| updated_at | TIMESTAMP | NOT NULL | CURRENT_TIMESTAMP | æ›´æ–°æ—¥æ™‚ |

**m_billing_detailsï¼ˆè«‹æ±‚æ˜ç»†ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰**

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|--------------|----------|------|------------|------|
| id | VARCHAR(50) | PK, NOT NULL | - | ID |
| billing_id | VARCHAR(50) | FK â†’ m_billings, NOT NULL | - | è«‹æ±‚ID |
| line_code | VARCHAR(20) | NOT NULL | - | ç·šä¾¿ã‚³ãƒ¼ãƒ‰ |
| line_name | VARCHAR(100) | NOT NULL | - | ç·šä¾¿å |
| daily_rate | DECIMAL(10,2) | NOT NULL | - | æ—¥åˆ¥å‚­è»Šè²» |
| days | INT | NOT NULL | - | æ—¥æ•° |
| amount | DECIMAL(10,2) | NOT NULL | - | é‡‘é¡ |
| description | TEXT | NULL | - | èª¬æ˜ |
| sort_order | INT | NULL | 0 | è¡¨ç¤ºé †åº |
| created_at | TIMESTAMP | NOT NULL | CURRENT_TIMESTAMP | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMP | NOT NULL | CURRENT_TIMESTAMP | æ›´æ–°æ—¥æ™‚ |

**m_billing_attachmentsï¼ˆè«‹æ±‚æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰**

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|--------------|----------|------|------------|------|
| id | VARCHAR(50) | PK, NOT NULL | - | ID |
| billing_id | VARCHAR(50) | FK â†’ m_billings, NOT NULL | - | è«‹æ±‚ID |
| file_name | VARCHAR(255) | NOT NULL | - | ãƒ•ã‚¡ã‚¤ãƒ«å |
| file_type | VARCHAR(50) | NOT NULL | - | ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ— |
| file_size | BIGINT | NOT NULL | - | ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º |
| file_path | VARCHAR(500) | NOT NULL | - | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ |
| uploaded_by | VARCHAR(100) | NOT NULL | - | ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰è€… |
| uploaded_at | TIMESTAMP | NOT NULL | CURRENT_TIMESTAMP | ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ—¥æ™‚ |

**é–¢é€£ä»˜ã‘èª¬æ˜**ï¼š
- `m_billings` ã¨ `m_billing_details` ã¯ 1:N é–¢ä¿‚ï¼ˆ1ã¤ã®è«‹æ±‚ã«è¤‡æ•°ã®æ˜ç´°ï¼‰
- `m_billings` ã¨ `m_billing_attachments` ã¯ 1:N é–¢ä¿‚ï¼ˆ1ã¤ã®è«‹æ±‚ã«è¤‡æ•°ã®æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- `m_billings` ã¨ `m_bases` ã¯ N:1 é–¢ä¿‚
- `m_billings` ã¨ `m_partner_companies` ã¯ N:1 é–¢ä¿‚

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–**ï¼š
- idx_billing_partner_id: ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼åˆ¥æ¤œç´¢ç”¨
- idx_billing_year_month: å¹´æœˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ç”¨
- idx_billing_status: çŠ¶æ…‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ç”¨
- idx_billing_issue_date: è«‹æ±‚æ—¥ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ç”¨
- idx_billing_partner_status: ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ï¼‹çŠ¶æ…‹è¤‡åˆæ¤œç´¢ç”¨
- idx_detail_billing_id: æ˜ç´°æ¤œç´¢ç”¨

---

## 9. æ•°æ®åº“è¡¨è®¾è®¡

### 8.1 billingsãƒ†ãƒ¼ãƒ–ãƒ«

```sql
CREATE TABLE billings (
    id VARCHAR(50) PRIMARY KEY,
    billing_id VARCHAR(50) UNIQUE NOT NULL COMMENT 'è«‹æ±‚ID',
    billing_year_month VARCHAR(7) NOT NULL COMMENT 'è«‹æ±‚å¹´æœˆ (YYYY-MM)',
    amount DECIMAL(12,2) NOT NULL COMMENT 'è«‹æ±‚é‡‘é¡',
    status ENUM('PENDING', 'ISSUED', 'PAID', 'CANCELLED') NOT NULL DEFAULT 'PENDING',
    issue_date DATE NOT NULL COMMENT 'è«‹æ±‚æ—¥',
    due_date DATE COMMENT 'æ”¯æ‰•æœŸé™',
    paid_date DATE COMMENT 'æ”¯æ‰•æ—¥',
    partner_id VARCHAR(50) NOT NULL COMMENT 'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ID',
    base_name VARCHAR(200) NOT NULL COMMENT 'ãƒ™ãƒ¼ã‚¹å',
    memo TEXT COMMENT 'å‚™è€ƒ',
    
    -- å®¡è®¡å­—æ®µ
    created_by VARCHAR(100) COMMENT 'ä½œæˆè€…',
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_by VARCHAR(100) COMMENT 'æ›´æ–°è€…',
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    -- ç´¢å¼•
    INDEX idx_billing_partner_id (partner_id),
    INDEX idx_billing_year_month (billing_year_month),
    INDEX idx_billing_status (status),
    INDEX idx_billing_issue_date (issue_date),
    INDEX idx_billing_partner_status (partner_id, status),
    
    -- å¤–é”®çº¦æŸ
    FOREIGN KEY (partner_id) REFERENCES partners(partner_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è«‹æ±‚æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ«';
```

### 8.2 billing_detailsãƒ†ãƒ¼ãƒ–ãƒ«

```sql
CREATE TABLE billing_details (
    id VARCHAR(50) PRIMARY KEY,
    billing_id VARCHAR(50) NOT NULL COMMENT 'è«‹æ±‚ID',
    line_code VARCHAR(20) NOT NULL COMMENT 'ç·šä¾¿ã‚³ãƒ¼ãƒ‰',
    line_name VARCHAR(100) NOT NULL COMMENT 'ç·šä¾¿å',
    daily_rate DECIMAL(10,2) NOT NULL COMMENT 'æ—¥åˆ¥å‚­è»Šè²»',
    days INT NOT NULL COMMENT 'æ—¥æ•°',
    amount DECIMAL(10,2) NOT NULL COMMENT 'é‡‘é¡ (daily_rate Ã— days)',
    description TEXT COMMENT 'èª¬æ˜',
    sort_order INT DEFAULT 0 COMMENT 'è¡¨ç¤ºé †åº',
    
    -- å®¡è®¡å­—æ®µ
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    -- ç´¢å¼•
    INDEX idx_detail_billing_id (billing_id),
    INDEX idx_detail_line_code (line_code),
    
    -- å¤–é”®çº¦æŸ
    FOREIGN KEY (billing_id) REFERENCES billings(id) ON DELETE CASCADE,
    
    -- æ£€æŸ¥çº¦æŸ
    CONSTRAINT chk_days_positive CHECK (days > 0),
    CONSTRAINT chk_amount_correct CHECK (amount = daily_rate * days)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è«‹æ±‚æ˜ç´°ãƒ†ãƒ¼ãƒ–ãƒ«';
```

### 8.3 billing_attachmentsãƒ†ãƒ¼ãƒ–ãƒ«

```sql
CREATE TABLE billing_attachments (
    id VARCHAR(50) PRIMARY KEY,
    billing_id VARCHAR(50) NOT NULL COMMENT 'è«‹æ±‚ID',
    file_name VARCHAR(255) NOT NULL COMMENT 'ãƒ•ã‚¡ã‚¤ãƒ«å',
    file_type VARCHAR(50) NOT NULL COMMENT 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—',
    file_size BIGINT NOT NULL COMMENT 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º (bytes)',
    file_path VARCHAR(500) NOT NULL COMMENT 'ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹',
    uploaded_by VARCHAR(100) NOT NULL COMMENT 'ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰è€…',
    uploaded_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    
    -- ç´¢å¼•
    INDEX idx_attachment_billing_id (billing_id),
    
    -- å¤–é”®çº¦æŸ
    FOREIGN KEY (billing_id) REFERENCES billings(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è«‹æ±‚æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«';
```

---

## 10. éªŒæ”¶æ ‡å‡†

### 9.1 åŠŸèƒ½éªŒæ”¶

| æµ‹è¯•åœºæ™¯ | é¢„æœŸç»“æœ | ä¼˜å…ˆçº§ |
|----------|----------|--------|
| é¡µé¢åˆå§‹åŠ è½½ | æ˜¾ç¤ºå½“æœˆè´¦å•ï¼ŒåŠ è½½é€Ÿåº¦<2ç§’ | P0 |
| å¹´æœˆæ¡ä»¶æœç´¢ | æ­£ç¡®ç­›é€‰æŒ‡å®šå¹´æœˆè´¦å• | P0 |
| è´¦å•IDæœç´¢ | æ”¯æŒéƒ¨åˆ†åŒ¹é…æœç´¢ | P0 |
| çŠ¶æ€ç­›é€‰ | æ­£ç¡®ç­›é€‰æŒ‡å®šçŠ¶æ€è´¦å• | P0 |
| ç»„åˆæ¡ä»¶æœç´¢ | å¤šæ¡ä»¶ANDé€»è¾‘æ­£ç¡® | P0 |
| åˆ†é¡µåŠŸèƒ½ | æ­£å¸¸ç¿»é¡µï¼Œæ¯é¡µå¤§å°åˆ‡æ¢ | P0 |
| æ’åºåŠŸèƒ½ | å„åˆ—ç‚¹å‡»æ’åºæ­£å¸¸ | P0 |
| æŸ¥çœ‹è¯¦æƒ… | è·³è½¬åˆ°è´¦å•è¯¦æƒ…é¡µ | P0 |
| å¯¼å‡ºåŠŸèƒ½ | ç”Ÿæˆæ­£ç¡®çš„Excel/CSVæ–‡ä»¶ | P1 |
| ç©ºçŠ¶æ€æ˜¾ç¤º | æ— æ•°æ®æ—¶æ˜¾ç¤ºå‹å¥½æç¤º | P0 |
| é”™è¯¯å¤„ç† | ç½‘ç»œé”™è¯¯æ—¶æ˜¾ç¤ºå‹å¥½æç¤º | P0 |

### 9.2 è§†è§‰éªŒæ”¶

| é¡¹ç›® | è¦æ±‚ |
|------|------|
| å¸ƒå±€ | ä¸è®¾è®¡ç¨¿ä¸€è‡´ |
| é¢œè‰² | çŠ¶æ€æ ‡ç­¾é¢œè‰²æ­£ç¡® |
| é—´è· | ç¬¦åˆUIè§„èŒƒ |
| å“åº”å¼ | é€‚é…PC/SP |
| å­—ä½“ | å¤§å°ã€é¢œè‰²æ­£ç¡® |

### 9.3 æ€§èƒ½éªŒæ”¶

| æŒ‡æ ‡ | è¦æ±‚ | æµ‹è¯•æ–¹æ³• |
|------|------|----------|
| é¡µé¢åŠ è½½ | <2ç§’ | Lighthouse |
| æœç´¢å“åº” | <1ç§’ | APIç›‘æ§ |
| è¡¨æ ¼æ¸²æŸ“ | <500ms | æµè§ˆå™¨DevTools |
| åˆ†é¡µåˆ‡æ¢ | <300ms | ç”¨æˆ·ä½“éªŒæµ‹è¯• |

### 9.4 å®‰å…¨éªŒæ”¶

| æ£€æŸ¥é¡¹ | è¦æ±‚ |
|--------|------|
| æƒé™æ§åˆ¶ | åªèƒ½æŸ¥çœ‹è‡ªå·±çš„è´¦å• |
| CSRFé˜²æŠ¤ | æ‰€æœ‰POSTè¯·æ±‚å¸¦Token |
| XSSé˜²æŠ¤ | ç”¨æˆ·è¾“å…¥æ­£ç¡®è½¬ä¹‰ |
| SQLæ³¨å…¥ | ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ |
| æ—¥å¿—å®¡è®¡ | æ“ä½œæ—¥å¿—è®°å½•å®Œæ•´ |

---

## 11. å˜æ›´æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|---------|------|
| 2026-02-10 | v1.0.1 | æ·»åŠ 8.ç”»é¢-API-æ•°æ®åº“å…³ç³»æ˜ å°„è¡¨ | - |
| 2026-02-05 | v1.0 | åˆå§‹ç‰ˆæœ¬ | - |

---

## 12. é™„å½•

### A.1 ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| å…¬å…±æŠ€æœ¯æ¶æ„è§„èŒƒ | [\_å…¬å…±æŠ€æœ¯æ¶æ„è§„èŒƒ.md](../_å…¬å…±æŠ€æœ¯æ¶æ„è§„èŒƒ.md) | å‰åç«¯æŠ€æœ¯æ¶æ„è¯¦ç»†è§„èŒƒ |
| b5-å®Ÿç¸¾è©³ç´° | [../b5-å®Ÿç¸¾è©³ç´°/05_è®¾è®¡è§„èŒƒ.md](../b5-å®Ÿç¸¾è©³ç´°/05_è®¾è®¡è§„èŒƒ.md) | Baseä¾§ä¸šç»©è¯¦æƒ…è®¾è®¡è§„èŒƒ |
| p3-ç™ºæ³¨è©³ç´° | [../p3-ç™ºæ³¨è©³ç´°/05_è®¾è®¡è§„èŒƒ.md](../p3-ç™ºæ³¨è©³ç´°/05_è®¾è®¡è§„èŒƒ.md) | åˆä½œä¼™ä¼´è®¢å•è¯¦æƒ…è®¾è®¡è§„èŒƒ |

### A.2 APIè°ƒç”¨ç¤ºä¾‹

```bash
# æœç´¢è¯·æ±‚ç¤ºä¾‹
curl -X GET "https://api.example.com/api/v1/partners/billings/search?yearMonth=2025-01&status=PAID&page=1&pageSize=20" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

```bash
# å¯¼å‡ºè¯·æ±‚ç¤ºä¾‹
curl -X POST "https://api.example.com/api/v1/partners/billings/export" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -H "Content-Type: application/json" \
  -d '{
    "searchConditions": {
      "yearMonth": "2025-01",
      "status": "PAID"
    },
    "format": "excel",
    "includeDetails": true
  }'
```

---

**æ–‡æ¡£ç¼–åˆ¶**: -  
**ç¼–åˆ¶æ—¶é—´**: 2026-02-10  
**é€‚ç”¨èŒƒå›´**: p5-è«‹æ±‚æ¤œç´¢ åˆä½œä¼™ä¼´è´¦å•æœç´¢é¡µé¢  
**äº¤å‰å¼•ç”¨**: [\_å…¬å…±æŠ€æœ¯æ¶æ„è§„èŒƒ.md](../_å…¬å…±æŠ€æœ¯æ¶æ„è§„èŒƒ.md)
