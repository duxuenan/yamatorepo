# b13-輸送パートナー詳細（ユーザー）- 详细分析

## 页面结构层次

```
配車発注管理システム
├── マスタ管理
│   ├── 輸送パートナー：ユーザー情報
│   │   ├── ユーザーID (只读)
│   │   ├── メールアドレス (只读)
│   │   └── 個人SMS (只读)
│   ├── ユーザー設定
│   │   ├── 通知送付先
│   │   ├── アカウント区分
│   │   └── サブアカウントへの連絡受領
│   ├── サブアカウント設定
│   │   └── 支店・営業所名
│   └── アカウント有効・無効
│       ├── 有効
│       └── 無効
```

## 字段详细说明

### 用户信息区域（只读）

| 字段标识 | 字段名称 | 数据类型 | 验证规则 | 业务规则 |
|----------|----------|----------|----------|----------|
| user_id | ユーザーID | string | 只读 | ネコーレWEBに登録されているユーザーIDを表示する |
| email | メールアドレス | string | 只读 | ネコーレWEBに登録されているメールアドレスを表示する |
| personal_sms | 個人SMS | string | 只读 | ネコーレWEBに登録されている電話番号を表示する |

### 用户设置区域

| 字段标识 | 字段名称 | 数据类型 | 选项值 | 业务规则 |
|----------|----------|----------|--------|----------|
| notification_target | 通知送付先 | radio | ● メール / 〇 SMS | メールまたは、SMSを選択する ※デフォルトはメール |
| account_type | アカウント区分 | radio | ● メイン / 〇 サブ | メインのアカウントなのか、サブアカウントなのかを選択する |
| sub_account_notification | サブアカウントへの連絡受領 | radio | ● する / 〇 しない | メインアカウントの場合に選択可能 |

### サブアカウント设置区域（条件显示）

| 字段标识 | 字段名称 | 数据类型 | 验证规则 | 显示条件 | 业务规则 |
|----------|----------|----------|----------|----------|----------|
| branch_name | 支店・営業所名 | string | 必填 | アカウント区分=サブ | 任意の支店・営業所名を入力する |

### 账户状态区域

| 字段标识 | 字段名称 | 数据类型 | 选项值 | 业务规则 |
|----------|----------|----------|--------|----------|
| account_status | アカウント有効・無効 | toggle | 有効 / 無効 | 有効：本システムを利用できる / 無効：本システムを利用できない |

## 交互流程详细说明

### 1. 页面加载流程

```
开始
  ↓
获取用户信息（从b12跳转或新增时预填）
  ↓
加载用户设置（通知送付先、アカウント区分）
  ↓
根据アカウント区分判断是否显示サブアカウント関連項目
  ↓
加载账户状态
  ↓
显示完整页面
```

### 2. 保存操作流程

```
用户修改设置
  ↓
点击「保存」按钮
  ↓
验证必填字段
  ↓
验证条件逻辑
  ↓
保存设置到数据库
  ↓
显示保存成功提示
  ↓
流程结束
```

### 3. 条件显示逻辑

```
IF アカウント区分 = メイン THEN
    显示：サブアカウントへの連絡受領
    隐藏：支店・営業所名
ELSE IF アカウント区分 = サブ THEN
    隐藏：サブアカウントへの連絡受領
    显示：支店・営業所名 (必填)
ENDIF
```

## 弹窗/特殊组件说明

### 账户状态切换开关

| 属性 | 值 |
|------|-----|
| 组件类型 | Toggle Switch |
| 选项 | 有効 / 無効 |
| 功能 | 切换用户是否可以使用系统 |
