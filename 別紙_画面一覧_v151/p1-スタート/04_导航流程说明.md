# p1-スタート - 导航流程说明

## 页面在系统中的位置

```
輸送パートナーシステム
├── スタート画面 (p1) - 当前页面
│   ├── ログイン
│   └── パスワード再設定
└── 共通ナビゲーション (p0)
```

## 进入当前页面的导航路径

### 路径1：初始访问

```
用户直接访问系统URL
  ↓
进入 p1-スタート 页面
  ↓
显示登录界面
```

### 路径2：登出后返回

```
用户在任意页面
  ↓
点击「ログアウト」
  ↓
清除会话
  ↓
返回 p1-スタート 页面
```

### 路径3：会话过期

```
用户处于登录状态
  ↓
会话过期
  ↓
重定向到 p1-スタート 页面
  ↓
显示会话过期消息
```

## 从当前页面出去的导航路径

### 跳转到其他页面

| 目标页面 | 触发条件 | 跳转方式 |
|----------|----------|----------|
| p0-共通ナビゲーション | 登录成功 | 直接跳转 |
| p1-パスワード再設定 | 点击忘记密码链接 | 直接跳转 |
| p0-共通ナビゲーション | 会话恢复 | 直接跳转 |

## 用户操作流程图

```
┌─────────────────────────────────────────────────────────────────┐
│                        用户操作流程                              │
└─────────────────────────────────────────────────────────────────┘

[开始]
  │
  ├─► 访问系统
  │     │
  │     └─► [进入 p1 页面]
  │                │
  │                ├─► [登录系统]
  │                │      │
  │                │      ├─► 输入ユーザーID
  │                │      ├─►入力パスワード
  │                │      └─► 点击「ログイン」
  │                │                │
  │                │                ├─► 成功 → 跳转到 p0
  │                │                └─► 失败 → 显示错误
  │                │
  │                └─► [忘记密码]
  │                       │
  │                       └─► 点击忘记密码链接
  │                                 │
  │                                 └─► 跳转到密码重置页面
  │
  └─► [结束]
```

## 页面状态管理

### URL参数

| 参数名 | 类型 | 说明 |
|--------|------|------|
| return_url | string | 登录成功后的返回URL |
| reason | string | 跳转原因（logout/session_expired） |

### 页面状态

| 状态类型 | 状态值 | 说明 |
|----------|--------|------|
| login_state | idle | 初始状态 |
| login_state | loading | 登录中 |
| login_state | success | 登录成功 |
| login_state | error | 登录失败 |
| show_password_reset | true/false | 显示忘记密码链接 |
