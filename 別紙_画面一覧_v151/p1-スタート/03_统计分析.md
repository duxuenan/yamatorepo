# p1-スタート - 统计分析

## 登录统计

### 1. 登录尝试统计

| 统计维度 | 计算方法 | 业务含义 |
|----------|----------|----------|
| 总登录次数 | COUNT(login_attempts) | 系统使用频率 |
| 成功登录数 | COUNT(WHERE status='success') | 有效用户数 |
| 失败登录数 | COUNT(WHERE status='failed') | 异常登录尝试 |
| 成功率 | success / total | 用户体验指标 |

### 2. 登录时间分布

| 时间段 | 预期登录量 | 业务含义 |
|--------|------------|----------|
| 早朝 (6-9時) | 中 | 出勤前登录 |
| 午前 (9-12時) | 高 | 主要工作时间 |
| 午後 (13-17時) | 高 | 业务处理时间 |
| 夕方 (17-20時) | 中 | 业务结束时间 |
| 夜間 (20-6時) | 低 | 非工作时间 |

### 3. 错误类型分布

| 错误类型 | 统计频率 | 处理建议 |
|----------|----------|----------|
| パスワード間違い | 高 | パスワードリセット機能強化 |
| ユーザーID間違い | 中 | 入力補完機能追加 |
| アカウントロック | 低 | ロック解除フロー整備 |

### 4. 示例数据结构

#### 登录日志数据

```json
{
  "login_attempts": [
    {
      "attempt_id": "att_001",
      "user_id": "partner_user_001",
      "timestamp": "2024-01-15T08:30:00Z",
      "device_type": "PC",
      "status": "success",
      "ip_address": "192.168.1.100"
    },
    {
      "attempt_id": "att_002",
      "user_id": "partner_user_002",
      "timestamp": "2024-01-15T08:35:00Z",
      "device_type": "SP",
      "status": "failed",
      "error_type": "password_mismatch"
    }
  ]
}
```

## 业务统计报表建议

### 1. 登录行为报表

| 报表名称 | 统计内容 | 更新频率 |
|----------|----------|----------|
| ログイン成功率的 | 成功/失败比例 | 实时 |
| 時間帯別ログイン数 | 时间段分布 | 每小时 |
| デバイス分布 | PC/SP比例 | 每日 |
| エラー分布 | 错误类型分布 | 每日 |

### 2. 安全监控报表

| 报表名称 | 统计内容 | 更新频率 |
|----------|----------|----------|
| 不審なログイン試行 | 可疑登录尝试 | 实时 |
| ブルートフォース攻撃 | 暴力破解尝试 | 实时 |
| 地理位置異常 | 异常地理位置 | 实时 |
