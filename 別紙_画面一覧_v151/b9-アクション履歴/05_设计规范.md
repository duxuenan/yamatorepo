# b9-アクション履歴 - 设计规范

## 1. 功能概述

### 1.1 文档信息
| 项目 | 内容 |
|------|------|
| **工作表名称** | b9-アクション履歴 |
| **界面编号** | b9 |
| **文档版本** | v1.0 |
| **最后更新** | 2026-02-XX|
| **文档状态** | ✅ 已发布 |

### 1.2 功能描述
b9-アクション履歴 是操作历史查询页面，提供アクション履歴の検索と一覧表示功能。

### 1.3 技术架构
本文档基于 **前后端分离架构**，详细技术规范请参考：

👉 **[\_公共技术架构规范.md](../_公共技术架构规范.md)**

| 层级 | 技术 |
|------|------|
| 前端 | React 18.x + TypeScript + Ant Design |
| 后端 | Spring Boot 3.x + Java 17 |

### 1.4 核心功能
- アクション履歴検索
- 検索結果一覧表示

### 1.5 适用范围
- 前端开发人员（列表组件实现）
- 后端开发人员（历史查询API）
- 测试工程师（查询功能测试）

---

## 2. 页面元素

### 2.1 元素清单

| 序号 | 元素名称 | 元素类型 | 功能说明 | 交互触发 |
|------|----------|----------|----------|----------|
| ⑴ | 年月選択 | プルダウン | 选择対象年月 | 选择触发 |
| ⑵ | 会社コード | 入力 | 会社コード | 文本输入 |
| ⑶ | パートナー名 | 入力 | パートナー名 | 文本输入 |
| ⑷ | 検索 | ボタン | 执行搜索 | 点击→执行查询 |
| ⑸ | 会社コード | テキスト | 公司代码 | 显示 |
| ⑹ | パートナー名 | テキスト | 公司名称 | 显示 |
| ⑺ | 日時 | テキスト | 操作日時 | 显示 |
| ⑻ | 更新者 | テキスト | ユーザー名 | 显示 |
| ⑨ | 項目 | テキスト | アクション内容 | 显示 |

---

## 3. 交互流程

### 3.1 页面加载流程
| 步骤 | 行为 | 系统响应 |
|------|------|----------|
| 1 | 页面初始化 | 检查登录状态 |
| 2 | 加载搜索条件 | 显示搜索表单 |
| 3 | 等待用户输入 | - |

### 3.2 搜索流程
| 步骤 | 用户操作 | 系统响应 |
|------|----------|----------|
| 1 | 输入搜索条件 | 年月選択/コード/名前 |
| 2 | 点击検索按钮 | 执行查询 |
| 3 | 显示结果 | 列表展示匹配数据 |

---

## 4. 界面规范

### 4.1 页面布局
| 属性 | PC端值 | SP端值 | 说明 |
|------|--------|--------|------|
| **页面类型** | PC | 不支持 | ≪PC≫标识 |
| **布局方式** | 上部搜索+下部列表 | - | 经典列表布局 |

### 4.2 列表字段顺序
| 顺序 | 字段 | 宽度 | 说明 |
|------|------|------|------|
| 1 | 会社コード | 固定 | 公司代码 |
| 2 | パートナー名 | 自动 | 公司名称 |
| 3 | 日時 | 固定 | 操作时间 |
| 4 | 更新者 | 固定 | 操作者 |
| 5 | 項目 | 自动 | 操作内容 |

---

## 5. API接口设计

### 5.1 历史查询API
```yaml
# 操作历史搜索查询
GET /api/v1/action-history/search
Authorization: Bearer {token}

# Query Parameters
- year_month: string (YYYY-MM)
- company_code: string
- partner_name: string
- page: integer
- page_size: integer
```

---

## 6. 前端实现

### 6.1 搜索列表组件
```typescript
// b9搜索组件
import { Select, Input, Button, Table } from 'antd';

export const B9HistoryPage: React.FC = () => {
  const [searchParams, setSearchParams] = useState({
    yearMonth: moment(),
    companyCode: '',
    partnerName: ''
  });

  const handleSearch = () => {
    // 执行搜索
  };

  return (
    <div className="b9-history-container">
      <div className="search-section">
        <Select
          value={searchParams.yearMonth}
          onChange={(value) => setSearchParams({...searchParams, yearMonth: value})}
        />
        <Input
          placeholder="会社コード"
          value={searchParams.companyCode}
          onChange={(e) => setSearchParams({...searchParams, companyCode: e.target.value})}
        />
        <Input
          placeholder="パートナー名"
          value={searchParams.partnerName}
          onChange={(e) => setSearchParams({...searchParams, partnerName: e.target.value})}
        />
        <Button onClick={handleSearch}>検索</Button>
      </div>
      <Table
        dataSource={historyList}
        columns={columns}
        rowKey="id"
      />
    </div>
  );
};
```

---

## 7. 验收标准

### 7.1 功能验收
- [ ] 搜索条件可正常输入
- [ ] 検索按钮可正常执行搜索
- [ ] 列表正确显示搜索结果

### 7.2 视觉验收
- [ ] 布局与设计稿一致
- [ ] 列表字段顺序正确

### 7.3 性能验收
- [ ] 搜索响应时间 < 1秒

---

## 8. 变更日志

| 日期 | 版本 | 变更内容 | 作者 |
|------|------|---------|------|
| 2026-02-XX| v1.0 | 初始版本 | - |

---

## 附录

### A.1 相关文档
| 文档 | 路径 | 说明 |
|------|------|------|
| 公共技术架构规范 | [\_公共技术架构规范.md](../_公共技术架构规范.md) | 前后端技术架构详细规范 |
| b0-导航菜单 | [../b0-共通ナビゲーション/05_设计规范.md](../b0-共通ナビゲーション/05_设计规范.md) | 导航菜单设计规范 |

---

**文档编制**: -  
**编制时间**: 2026-02-XX 
**适用范围**: 別紙_画面一覧_v151.xlsx - b9-アクション履歴  
**交叉引用**: [\_公共技术架构规范.md](../_公共技术架构规范.md)
