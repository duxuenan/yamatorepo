# b8-CSVアップロード - 导航流程说明

## 1. 页面导航概述

### 1.1 页面定位
b8-CSVアップロード 是系统的**CSV上传页面**，提供BOSS系统数据的导入功能。

### 1.2 导航类型
| 导航类型 | 说明 |
|----------|------|
| **功能页面** | 提供CSV上传功能 |
| **数据导入页面** | BOSS系统数据对接 |

## 2. 入口分析

### 2.1 直接入口
| 入口方式 | 触发条件 | 目标页面 |
|----------|----------|----------|
| 菜单点击 | b0-共通ナビゲーション | b8-CSVアップロード |

### 2.2 入口状态
| 状态 | 条件 |
|------|------|
| 初期状态 | 显示Tabs和年月选择 |
| 上传后状态 | 显示上传结果和检查结果 |

## 3. 出口分析

### 3.1 操作出口
| 操作 | 触发条件 | 出口类型 |
|------|----------|----------|
| パートナーに反映 | 上传成功 | 数据导入 |
| 一斉メール送信 | 反映成功 | 邮件通知 |

### 3.2 Tab切换
| Tab | 内容 | 时机 |
|-----|------|------|
| 発注（前月25日～26日） | 月間運行計画表上传 | 发注阶段 |
| 実績確認（当月中） | 日別傭車費一覧上传 | 业绩确认阶段 |
| 発注＆実績確認（〆後） | 双方数据上传 | 最终确认 |

## 4. 导航流程图

### 4.1 主流程
```
┌─────────────────────────────────────┐
│       b0-共通ナビゲーション          │
│        点击「CSVアップロード」        │
└─────────────────┬───────────────────┘
                  ▼
┌─────────────────────────────────────┐
│         b8-CSVアップロード           │
│      （CSV上传页面）                 │
└─────────────────┬───────────────────┘
                  │
         ┌───────┴───────┐
         │               │
         ▼               ▼
    ┌─────────┐    ┌─────────┐
    │ Tab选择   │    │ 年月選択 │
    └─────────┘    └─────────┘
                  │
                  ▼
┌─────────────────────────────────────┐
│         文件上传流程                   │
│  ファイル選択 → アップロード          │
│  → チェック → 反映                  │
└─────────────────────────────────────┘
```

### 4.2 上传处理流程
```
[选择Tab]
        │
        ▼
[选择年月]
        │
        ▼
[选择文件]
        │
        ▼
[上传文件]
        │
        ▼
[ファイルチェック]
    ┌───┴───┐
    │       │
  OK      NG
    │       │
    ▼       ▼
[データチェック] [显示错误]
        │
        ▼
[パートナーに反映]
        │
        ▼
[一斉メール送信]
```

## 5. 导航状态管理

### 5.1 页面状态
| 状态 | 条件 | 导航行为 |
|------|------|----------|
| **初始状态** | 首次访问 | 显示Tabs和年月 |
| **上传状态** | 文件选择后 | 显示上传进度 |
| **检查状态** | 上传完成后 | 显示检查结果 |
| **反映状态** | 确认后 | 执行数据导入 |
| **发送状态** | 反映后 | 发送邮件通知 |

### 5.2 状态转换
```
[页面加载]
        │
        ▼
[Tab切换]
        │
        ▼
[年月选择]
        │
        ▼
[文件上传]
        │
        ▼
[结果检查]
        │
        ▼
[确认/取消]
        │
        ▼
[执行反映]
```

## 6. 与其他页面的关系

### 6.1 导航树
```
                    [b0-共通ナビゲーション]
                                   │
                                   ▼
                 ┌─────────────────────┐
                 │   b8-CSVアップロード  │
                 │    （上传页面）       │
                 └──────────┬──────────┘
                            │
         ┌──────────────────┼──────────────────┐
         │                  │                  │
         ▼                  ▼                  ▼
┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐
│   発注Tab        │ │   実績確認Tab    │ │   〆後Tab       │
│   (月間計画表)   │ │   (日別傭車費)   │ │   (双方)        │
└─────────────────┘ └─────────────────┘ └─────────────────┘
```

### 6.2 关联页面
| 页面 | 关系类型 | 说明 |
|------|----------|------|
| b0-共通ナビゲーション | 导航组件 | 侧边栏入口 |
| b2-発注検索 | 数据关联 | 发注数据 |
| b4-実績検索 | 数据关联 | 业绩数据 |
| b5-実績詳細 | 数据关联 | 业绩详情 |

## 7. 特殊导航场景

### 7.1 文件检查失败
| 场景 | 处理方式 |
|------|----------|
| 必須項目ブランク | 显示错误，无法继续 |
| 項目数不一致 | 显示错误，无法继续 |
| 文字コード错误 | 显示错误，无法继续 |

### 7.2 数据检查处理
| 场景 | 处理方式 |
|------|----------|
| 差分存在 | 显示差分，选择保留/删除 |
| 无差分 | 直接进入反映 |

### 7.3 サブアカウント处理
| 场景 | 处理方式 |
|------|----------|
| サブアカあり | 送付されない |
| サブアカなし | 一斉メール送信対象 |
