这份文档是 **「空電プッシュ API仕様書」**（版本 3.1.7），由株式会社クローバー・ネットワーク・コム于2020年6月29日发布。

简单来说，这是一份关于 **SMS（短信）推送服务** 的外部API接口规范说明书。它详细定义了第三方系统如何通过调用其提供的API来发送短信、查询发送结果、获取报表等。

以下是该文档的核心内容解读：

### 1. 基础连接信息 (はじめに)

*   **连接方式**: 使用 `HTTPS` 协议，支持 `GET` 和 `POST` 方法，并且要求使用 `TLS 1.2`。
*   **IP限制**: 为了安全，客户必须在管理后台预先注册自己的服务器IP地址，只有这些IP才能调用API。
*   **并发限制**: 每个账户（プロファイル）最多只能有 **5个** 同时进行的API连接。

### 2. 核心API功能列表

文档详细描述了以下14个主要的API接口：

#### **短信发送类**
*   **2.1 SMS送信 API**: 最基础的短信发送接口。需要提供Token、电话号码、各运营商（Docomo, Softbank, au, Rakuten）对应的消息内容、安全码等参数。
*   **2.9 SMS長文分割送信 API**: 用于发送长短信。它将一条长消息拆分成多条（最多10条），每条不超过70字符，并按顺序发送。特别注意，对Softbank用户，系统会尝试将多条消息合并成一条显示。

#### **发送结果查询类**
*   **2.2 SMS送信結果取得 API**: 通过唯一的 `messageId` 查询单条短信的发送状态和送达结果。
*   **2.10 SMS長文分割送信結果取得 API**: 专门用于查询通过“长文分割”API发送的短信的状态，会返回所有分段消息的详细状态。
*   **2.3 SMS送信結果取得（トラッキングコード）API**: 通过自定义的 `TrackingCode`（追踪代码）批量查询在特定时间段内所有使用该代码发送的短信结果。

#### **自动通知类**
*   **2.4 SMS送信結果通知 API**: 这是一个**回调（Callback）**机制。当短信的发送状态或送达状态发生变化时，空电服务会主动向客户预先在管理后台设置好的URL发送一个POST请求，实时通知结果。这对于需要即时处理发送失败等情况非常有用。

#### **报表与计费类**
*   **2.5 / 2.6 月别/日别実績レポート取得 API**: 获取按月或按日统计的发送业绩报告，包括总请求数、成功数、错误数、平均发送时间等。
*   **2.7 / 2.8 月别/日别請求対象状況取得 API**: 获取按月或按日统计的、用于计费的详细数据，会区分不同运营商（Docomo, au, Softbank, Rakuten等）的发送量。

#### **账户配置管理类**
*   **2.11 / 2.12 プロファイル情報取得/変更 API**: 允许通过API获取或修改账户的配置信息，例如是否启用送达结果通知、长文分割功能、再发送策略、乐天移动支持等。
*   **2.13 / 2.14 送信リスト設定取得/変更 API**: 管理一个“发送名单”（类似于白名单或黑名单），可以指定哪些号码可以接收短信，并为每个号码添加备注。

### 3. 关键概念与代码定义

文档中反复出现并明确定义了几个核心状态码，理解它们至关重要：

*   **メッセージ状態コード (Message Status Code)**: 描述**空电服务到运营商网关**这一环节的状态。
    *   `1`: 发送完成
    *   `2`: 发送错误
    *   `3`: 因携帯番号履歴判定（手机号历史判断）而未发送
    *   `4`: 超过设定的发送期限
*   **送達結果コード (Delivery Result Code)**: 描述**运营商网关到用户手机**这一环节的最终状态。
    *   `1`: 着信済 (已送达)
    *   `2`: 圏外 (手机不在服务区)
    *   `3`: エラー (送达失败)
*   **携帯キャリアコード (Carrier Code)**: 用于标识运营商。
    *   `1`: Docomo
    *   `2`: Softbank
    *   `3`: au
    *   `6`: 楽天 (Rakuten)

### 4. 安全与认证

所有API调用都需要两个关键的安全凭证：
*   **Token**: 服务开始时颁发的访问密钥。
*   **SecurityCode**: 在管理后台自行设置的安全码。

任何认证失败（Token、SecurityCode或IP不匹配）都会返回状态码 `201`。

### 总结

这份API文档非常全面和规范，为开发者提供了完整的接入指南。它不仅支持基本的短信发送，还提供了长短信、实时回调、详细的报表、账户配置管理以及发送名单控制等高级功能，适用于需要稳定、可靠且功能丰富的短信服务的企业级应用场景。